"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{9747:function(e,t,n){n.d(t,{$45:function(){return moveNodes},$KD:function(){return isDefined},$Rk:function(){return focusEditor},AyJ:function(){return useComposedRef},CBv:function(){return isUrl},CET:function(){return useEditorRef},DSi:function(){return getHandler},DWu:function(){return getPath},DYv:function(){return findNode},ELZ:function(){return findDescendant},EQD:function(){return match},Eln:function(){return getNodeChildren},F5_:function(){return replaceTagName},FIU:function(){return cleanHtmlTextNodes},Feq:function(){return insertFragment},GKY:function(){return setMarks},Ga5:function(){return getChildren},GcU:function(){return withPlateEventProvider},GsE:function(){return isText},H15:function(){return pipeInsertDataQuery},HdH:function(){return getPreviousPath},JIX:function(){return createPlateEditor},KCC:function(){return cleanHtmlFontElements},KOA:function(){return p.KO},L4j:function(){return t5},LKm:function(){return unwrapNodes},LMm:function(){return getCommonNode},L_G:function(){return t8},Lgc:function(){return deleteMerge},LqT:function(){return getEdgeBlocksAbove},Lqh:function(){return isBlock},MQT:function(){return someHtmlElement},MTn:function(){return h.MT},Mfv:function(){return ne},MkB:function(){return getNode},Mxs:function(){return getPointAfter},Nan:function(){return moveChildren},O$c:function(){return findNodePath},O9X:function(){return getPluginInjectProps},OmN:function(){return insertText},Ow4:function(){return getParentNode},P99:function(){return isType},P9T:function(){return removeMark},PL2:function(){return deserializeHtml},QEM:function(){return getHtmlComments},QFr:function(){return defaultsDeepToNodes},QXv:function(){return tx},QkL:function(){return insertEmptyElement},SPS:function(){return isBlockTextEmptyAfterSelection},SV0:function(){return x},T2j:function(){return getPointBefore},TUE:function(){return mockPlugin},TvR:function(){return createComponentAs},Tx6:function(){return withProviders},U7P:function(){return usePlateEditorState},Un4:function(){return onKeyDownToggleMark},VKW:function(){return onKeyDownToggleElement},VcW:function(){return insertElements},VdF:function(){return cleanHtmlEmptyElements},Vi9:function(){return isStartPoint},VqB:function(){return queryNode},W65:function(){return postCleanHtml},WR7:function(){return createPathRef},Wig:function(){return hexToBase64},X9_:function(){return createElementAs},Y47:function(){return moveSelection},YP0:function(){return useElement},Ys:function(){return select},Yvd:function(){return isHtmlComment},Z5U:function(){return setSelection},ZJ1:function(){return getEndPoint},ZTm:function(){return createNodesHOC},ZUk:function(){return createPlugins},Zg$:function(){return getAboveNode},_6L:function(){return getMarks},_YE:function(){return isSelectionAtBlockStart},_xc:function(){return mapInjectPropsToPlugin},agy:function(){return serializeHtml},bbC:function(){return getPluginType},blY:function(){return getRangeBefore},c$S:function(){return removeHtmlNodesBetweenComments},cn0:function(){return p.cn},dFs:function(){return ez},eNq:function(){return getEditorString},esA:function(){return getMark},fLV:function(){return setNodes},fdk:function(){return createNodeHOC},gzs:function(){return splitNodes},hrz:function(){return escapeRegExp},hv7:function(){return Plate},iMk:function(){return getLeafNode},iNf:function(){return getInjectedPlugins},iZo:function(){return t7},iz5:function(){return getPointBeforeLocation},izS:function(){return unsetNodes},jks:function(){return isRangeAcrossBlocks},jlz:function(){return cleanHtmlLinkElements},k55:function(){return isLastChild},kKo:function(){return isElement},kRc:function(){return withoutNormalizing},lB7:function(){return collapseSelection},lBo:function(){return getPreventDefaultHandler},lMF:function(){return getPluginOptions},ldk:function(){return traverseHtmlElements},mRq:function(){return getSelectionText},mTi:function(){return getPluginTypes},mnA:function(){return eZ},mxW:function(){return useEventPlateId},n2N:function(){return getRangeFromBlockStart},nXd:function(){return deleteText},njR:function(){return isVoid},np2:function(){return isElementEmpty},oUB:function(){return setElements},oe7:function(){return cleanHtmlBrElements},p4q:function(){return t0},phS:function(){return copyBlockMarksToSpanChild},pj6:function(){return getNodeEntry},plg:function(){return getStartPoint},ptC:function(){return isBlockAboveEmpty},qEX:function(){return wrapNodes},qcw:function(){return getNodeString},qnz:function(){return tT},r4l:function(){return removeNodes},rO3:function(){return usePlateEditorRef},rcM:function(){return createNodesWithHOC},rxh:function(){return getRange},s2K:function(){return insertNodes},s3t:function(){return getPlugin},s7w:function(){return isSelectionAtBlockEnd},s8L:function(){return t4},sCb:function(){return isSelectionExpanded},sZ5:function(){return useEditorState},scZ:function(){return isFirstChild},tVv:function(){return getNodeEntries},tWr:function(){return getNodeTexts},uEZ:function(){return hasNode},uPr:function(){return toggleNodeType},ulk:function(){return isExpanded},v$F:function(){return getNodes},vHQ:function(){return preCleanHtml},vl2:function(){return withProps},w9d:function(){return toggleMark},wEy:function(){return getLastChildPath},wbn:function(){return getLastNodeByLevel},x4s:function(){return findHtmlParentElement},xje:function(){return createPluginFactory},xmC:function(){return getBlockAbove},xuv:function(){return t2},yw6:function(){return isMarkActive},zbr:function(){return isCollapsed},zwG:function(){return someNode}});var r,o,i,a,l,s,u,c,d,f,p=n(24),g=n(7294),m=n(9251),h=n(4762),y=n(7645),v=n(7493),b=n(6010),_=n(4336),E=n(590),P=n(7762);let capitalizeFirstLetter=(e="")=>e.length?e[0].toUpperCase()+e.slice(1):"",getStoreIndex=(e="")=>e.length?`${e}Store`:"store",getUseStoreIndex=(e="")=>`use${capitalizeFirstLetter(e)}Store`,createAtomStore=(e,{scope:t,initialStore:n,name:r=""}={})=>{let o=getUseStoreIndex(null==n?void 0:n.name),i=getStoreIndex(null==n?void 0:n.name),a=getUseStoreIndex(r),l=getStoreIndex(r),s=n?n[o]().get:{},u=n?n[o]().set:{},c=n?n[o]().use:{},d=n?n[i].atom:{};Object.keys(e).forEach(n=>{let r=(0,p.cn)(e[n]);d[n]=r,s[n]=e=>(0,p.Dv)(r,null!=e?e:t),u[n]=e=>(0,p.b9)(r,null!=e?e:t),c[n]=e=>(0,p.KO)(r,null!=e?e:t)});let f={[a]:()=>({get:s,set:u,use:c}),[l]:{atom:d},name:r};return{...f,[l]:{...f[l],extend:(e,n)=>createAtomStore(e,{scope:t,initialStore:f,...n})}}};function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let C=["onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onDOMBeforeInput","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],k="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),escapeRegExp=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),findHtmlParentElement=(e,t)=>e&&e.nodeName!==t?findHtmlParentElement(e.parentElement,t):e,getHandler=(e,...t)=>()=>{null==e||e(...t)},getSlateClass=e=>`slate-${e}`,hexToBase64=e=>{let t=e.match(/\w{2}/g)||[],n=t.map(e=>String.fromCharCode(parseInt(e,16)));return btoa(n.join(""))};var j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var S=createCommonjsModule(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});for(var IS_MAC=()=>"undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ALIASES=()=>({add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:IS_MAC()?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"}),r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=1;o<20;o++)r["f"+o]=111+o;function isHotkey(e,t,n){!t||"byKey"in t||(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(e){return parseHotkey(e,t)}),check=function(e){return r.some(function(t){return compareHotkey(t,e)})};return null==n?check:check(n)}function parseHotkey(e,t){var r=t&&t.byKey,o={},i=(e=e.replace("++","+add")).split("+"),a=i.length;for(var l in n)o[n[l]]=!1;var s=!0,u=!1,c=void 0;try{for(var d,f=i[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value,g=p.endsWith("?")&&p.length>1;g&&(p=p.slice(0,-1));var m=toKeyName(p),h=n[m];1!==a&&h||(r?o.key=m:o.which=toKeyCode(p)),h&&(o[h]=!g||null)}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return o}function compareHotkey(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&(null!=(o="key"===n&&null!=t.key?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&o!==r)return!1}return!0}function toKeyCode(e){return r[e=toKeyName(e)]||e.toUpperCase().charCodeAt(0)}function toKeyName(e){return e=e.toLowerCase(),e=ALIASES()[e]||e}t.default=isHotkey,t.isHotkey=isHotkey,t.isCodeHotkey=function(e,t){return isHotkey(e,t)},t.isKeyHotkey=function(e,t){return isHotkey(e,{byKey:!0},t)},t.parseHotkey=parseHotkey,t.compareHotkey=compareHotkey,t.toKeyCode=toKeyCode,t.toKeyName=toKeyName}),w=S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S;S.isHotkey,S.isCodeHotkey;var O=S.isKeyHotkey;S.parseHotkey,S.compareHotkey,S.toKeyCode,S.toKeyName;let isComposing=e=>m.F3.isComposing(e),A={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",insertSoftBreak:"shift+enter",italic:"mod+i",moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",splitBlock:"enter",tab:"tab",untab:"shift+tab",undo:"mod+z"},N={deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},T={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},create=e=>{let t=A[e],n=N[e],r=T[e],o=t&&O(t),i=n&&O(n),a=r&&O(r);return e=>!!(o&&o(e)||k&&i&&i(e)||!k&&a&&a(e))},createComposing=e=>(t,n,{composing:r}={})=>!!create(e)(n)&&!!r===isComposing(t),x={isBold:create("bold"),isCompose:create("compose"),isMoveBackward:create("moveBackward"),isMoveForward:create("moveForward"),isDeleteBackward:create("deleteBackward"),isDeleteForward:create("deleteForward"),isDeleteLineBackward:create("deleteLineBackward"),isDeleteLineForward:create("deleteLineForward"),isDeleteWordBackward:create("deleteWordBackward"),isDeleteWordForward:create("deleteWordForward"),isExtendBackward:create("extendBackward"),isExtendForward:create("extendForward"),isExtendLineBackward:create("extendLineBackward"),isExtendLineForward:create("extendLineForward"),isItalic:create("italic"),isMoveLineBackward:create("moveLineBackward"),isMoveLineForward:create("moveLineForward"),isMoveWordBackward:create("moveWordBackward"),isMoveWordForward:create("moveWordForward"),isRedo:create("redo"),isSoftBreak:create("insertSoftBreak"),isSplitBlock:create("splitBlock"),isTab:createComposing("tab"),isTransposeCharacter:create("transposeCharacter"),isUndo:create("undo"),isUntab:createComposing("untab")},M=/^(?:\w+:)?\/\/(\S+)$/,L=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,B=/^[^\s.]+\.\S{2,}$/,isUrl=e=>{if("string"!=typeof e)return!1;let t=e.match(M);if(!t)return!1;let n=t[1];if(!n)return!1;try{new URL(e)}catch(e){return!1}return L.test(n)||B.test(n)},D=p.zt,isUndefined=e=>void 0===e,isNull=e=>null===e,isUndefinedOrNull=e=>isUndefined(e)||isNull(e),isDefined=e=>!isUndefinedOrNull(e);var _apply=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},identity_1=function(e){return e},H=Math.max,_overRest=function(e,t,n){return t=H(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=H(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(a),_apply(e,this,l)}},R="object"==typeof j&&j&&j.Object===Object&&j,I="object"==typeof self&&self&&self.Object===Object&&self,F=R||I||Function("return this")(),K=F.Symbol,z=Object.prototype,U=z.hasOwnProperty,$=z.toString,V=K?K.toStringTag:void 0,_getRawTag=function(e){var t=U.call(e,V),n=e[V];try{e[V]=void 0;var r=!0}catch(e){}var o=$.call(e);return r&&(t?e[V]=n:delete e[V]),o},W=Object.prototype.toString,q=K?K.toStringTag:void 0,_baseGetTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":q&&q in Object(e)?_getRawTag(e):W.call(e)},isObject_1=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},isFunction_1=function(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},G=F["__core-js_shared__"],Y=(r=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Q=Function.prototype.toString,_toSource=function(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Z=/^\[object .+?Constructor\]$/,X=Object.prototype,J=Function.prototype.toString,ee=X.hasOwnProperty,et=RegExp("^"+J.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_getNative=function(e,t){var n,r=null==e?void 0:e[t];return isObject_1(n=r)&&(!Y||!(Y in n))&&(isFunction_1(n)?et:Z).test(_toSource(n))?r:void 0},en=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),er=en?function(e,t){return en(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:identity_1,eo=Date.now,ei=(o=0,i=0,function(){var e=eo(),t=16-(e-i);if(i=e,t>0){if(++o>=800)return arguments[0]}else o=0;return er.apply(void 0,arguments)}),_baseRest=function(e,t){return ei(_overRest(e,t,identity_1),e+"")},eq_1=function(e,t){return e===t||e!=e&&t!=t},_assocIndexOf=function(e,t){for(var n=e.length;n--;)if(eq_1(e[n][0],t))return n;return -1},ea=Array.prototype.splice;function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(e){var t=this.__data__,n=_assocIndexOf(t,e);return!(n<0)&&(n==t.length-1?t.pop():ea.call(t,n,1),--this.size,!0)},ListCache.prototype.get=function(e){var t=this.__data__,n=_assocIndexOf(t,e);return n<0?void 0:t[n][1]},ListCache.prototype.has=function(e){return _assocIndexOf(this.__data__,e)>-1},ListCache.prototype.set=function(e,t){var n=this.__data__,r=_assocIndexOf(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var el=_getNative(F,"Map"),es=_getNative(Object,"create"),eu=Object.prototype.hasOwnProperty,ec=Object.prototype.hasOwnProperty;function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hash.prototype.clear=function(){this.__data__=es?es(null):{},this.size=0},Hash.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hash.prototype.get=function(e){var t=this.__data__;if(es){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return eu.call(t,e)?t[e]:void 0},Hash.prototype.has=function(e){var t=this.__data__;return es?void 0!==t[e]:ec.call(t,e)},Hash.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=es&&void 0===t?"__lodash_hash_undefined__":t,this};var _isKeyable=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},_getMapData=function(e,t){var n=e.__data__;return _isKeyable(t)?n["string"==typeof t?"string":"hash"]:n.map};function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(el||ListCache),string:new Hash}},MapCache.prototype.delete=function(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t},MapCache.prototype.get=function(e){return _getMapData(this,e).get(e)},MapCache.prototype.has=function(e){return _getMapData(this,e).has(e)},MapCache.prototype.set=function(e,t){var n=_getMapData(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Stack.prototype.get=function(e){return this.__data__.get(e)},Stack.prototype.has=function(e){return this.__data__.has(e)},Stack.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ListCache){var r=n.__data__;if(!el||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new MapCache(r)}return n.set(e,t),this.size=n.size,this};var _baseAssignValue=function(e,t,n){"__proto__"==t&&en?en(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},_assignMergeValue=function(e,t,n){(void 0===n||eq_1(e[t],n))&&(void 0!==n||t in e)||_baseAssignValue(e,t,n)},_baseFor=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var l=i[++r];if(!1===t(o[l],l,o))break}return e},ed=createCommonjsModule(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?F.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}}),ef=F.Uint8Array,_cloneArrayBuffer=function(e){var t=new e.constructor(e.byteLength);return new ef(t).set(new ef(e)),t},_cloneTypedArray=function(e,t){var n=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},_copyArray=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},ep=Object.create,eg=function(){function object(){}return function(e){if(!isObject_1(e))return{};if(ep)return ep(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}(),_overArg=function(e,t){return function(n){return e(t(n))}},em=_overArg(Object.getPrototypeOf,Object),eh=Object.prototype,_isPrototype=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eh)},_initCloneObject=function(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:eg(em(e))},isObjectLike_1=function(e){return null!=e&&"object"==typeof e},_baseIsArguments=function(e){return isObjectLike_1(e)&&"[object Arguments]"==_baseGetTag(e)},ey=Object.prototype,ev=ey.hasOwnProperty,eb=ey.propertyIsEnumerable,e_=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&ev.call(e,"callee")&&!eb.call(e,"callee")},eE=Array.isArray,isLength_1=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},isArrayLike_1=function(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)},stubFalse_1=function(){return!1},eP=createCommonjsModule(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?F.Buffer:void 0,i=o?o.isBuffer:void 0;e.exports=i||stubFalse_1}),eC=Object.prototype,ek=Function.prototype.toString,ej=eC.hasOwnProperty,eS=ek.call(Object),isPlainObject_1=function(e){if(!isObjectLike_1(e)||"[object Object]"!=_baseGetTag(e))return!1;var t=em(e);if(null===t)return!0;var n=ej.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ek.call(n)==eS},ew={};ew["[object Float32Array]"]=ew["[object Float64Array]"]=ew["[object Int8Array]"]=ew["[object Int16Array]"]=ew["[object Int32Array]"]=ew["[object Uint8Array]"]=ew["[object Uint8ClampedArray]"]=ew["[object Uint16Array]"]=ew["[object Uint32Array]"]=!0,ew["[object Arguments]"]=ew["[object Array]"]=ew["[object ArrayBuffer]"]=ew["[object Boolean]"]=ew["[object DataView]"]=ew["[object Date]"]=ew["[object Error]"]=ew["[object Function]"]=ew["[object Map]"]=ew["[object Number]"]=ew["[object Object]"]=ew["[object RegExp]"]=ew["[object Set]"]=ew["[object String]"]=ew["[object WeakMap]"]=!1;var _baseUnary=function(e){return function(t){return e(t)}},eO=createCommonjsModule(function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&R.process,i=function(){try{var e=r&&r.require&&r.require("util").types;if(e)return e;return o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),eA=eO&&eO.isTypedArray,eN=eA?_baseUnary(eA):function(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!ew[_baseGetTag(e)]},_safeGet=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},eT=Object.prototype.hasOwnProperty,_assignValue=function(e,t,n){var r=e[t];eT.call(e,t)&&eq_1(r,n)&&(void 0!==n||t in e)||_baseAssignValue(e,t,n)},_copyObject=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var l=t[i],s=r?r(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),o?_baseAssignValue(n,l,s):_assignValue(n,l,s)}return n},_baseTimes=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},ex=/^(?:0|[1-9]\d*)$/,_isIndex=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ex.test(e))&&e>-1&&e%1==0&&e<t},eM=Object.prototype.hasOwnProperty,_arrayLikeKeys=function(e,t){var n=eE(e),r=!n&&e_(e),o=!n&&!r&&eP(e),i=!n&&!r&&!o&&eN(e),a=n||r||o||i,l=a?_baseTimes(e.length,String):[],s=l.length;for(var u in e)(t||eM.call(e,u))&&!(a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_isIndex(u,s)))&&l.push(u);return l},_nativeKeysIn=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},eL=Object.prototype.hasOwnProperty,_baseKeysIn=function(e){if(!isObject_1(e))return _nativeKeysIn(e);var t=_isPrototype(e),n=[];for(var r in e)"constructor"==r&&(t||!eL.call(e,r))||n.push(r);return n},keysIn_1=function(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)},_baseMergeDeep=function(e,t,n,r,o,i,a){var l=_safeGet(e,n),s=_safeGet(t,n),u=a.get(s);if(u){_assignMergeValue(e,n,u);return}var c=i?i(l,s,n+"",e,t,a):void 0,d=void 0===c;if(d){var f=eE(s),p=!f&&eP(s),g=!f&&!p&&eN(s);(c=s,f||p||g)?eE(l)?c=l:isObjectLike_1(l)&&isArrayLike_1(l)?c=_copyArray(l):p?(d=!1,c=ed(s,!0)):g?(d=!1,c=_cloneTypedArray(s,!0)):c=[]:isPlainObject_1(s)||e_(s)?(c=l,e_(l))?c=_copyObject(l,keysIn_1(l)):(!isObject_1(l)||isFunction_1(l))&&(c=_initCloneObject(s)):d=!1}d&&(a.set(s,c),o(c,s,r,i,a),a.delete(s)),_assignMergeValue(e,n,c)},_baseMerge=function baseMerge(e,t,n,r,o){e!==t&&_baseFor(t,function(i,a){if(o||(o=new Stack),isObject_1(i))_baseMergeDeep(e,t,a,n,baseMerge,r,o);else{var l=r?r(_safeGet(e,a),i,a+"",e,t,o):void 0;void 0===l&&(l=i),_assignMergeValue(e,a,l)}},keysIn_1)},_customDefaultsMerge=function customDefaultsMerge(e,t,n,r,o,i){return isObject_1(e)&&isObject_1(t)&&(i.set(t,e),_baseMerge(e,t,void 0,customDefaultsMerge,i),i.delete(t)),e},_isIterateeCall=function(e,t,n){if(!isObject_1(n))return!1;var r=typeof t;return("number"==r?!!(isArrayLike_1(n)&&_isIndex(t,n.length)):"string"==r&&t in n)&&eq_1(n[t],e)},_createAssigner=function(e){return _baseRest(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&_isIterateeCall(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,i)}return t})},eB=_createAssigner(function(e,t,n,r){_baseMerge(e,t,n,r)}),eD=_baseRest(function(e){return e.push(void 0,_customDefaultsMerge),_apply(eB,void 0,e)});let overridePluginsByKey=(e,t={},n)=>{var r;if(t[e.key]){let{plugins:r,then:o,...i}=t[e.key];e=eD(i,e),n||null==r||r.forEach(t=>{e.plugins||(e.plugins=[]);let n=e.plugins.find(e=>e.key===t.key);n||e.plugins.push(t)})}e.plugins&&(e.plugins=e.plugins.map(e=>overridePluginsByKey(e,t,!0)));let{then:o}=e;return o?e.then=(n,r)=>{let i={key:e.key,...o(n,r)};return eD(overridePluginsByKey(i,t),i)}:null!==(r=t[e.key])&&void 0!==r&&r.then&&(e.then=t[e.key].then),e},createPluginFactory=e=>(t,n={})=>(n[e.key]=t,overridePluginsByKey({...e},n)),eH="deserializeAst",eR=createPluginFactory({key:eH,editor:{insertData:{format:"application/x-slate-fragment",getFragment:({data:e})=>{let t=decodeURIComponent(window.atob(e));return JSON.parse(t)}}}}),eI=(0,h.MT)("event-editor")({blur:null,focus:null,last:null}),eF=eI.set,eK=eI.get,ez=eI.use,eU="event-editor",e$=createPluginFactory({key:eU,handlers:{onFocus:e=>()=>{eF.focus(e.id)},onBlur:e=>()=>{let t=eK.focus();t===e.id&&eF.focus(null),eF.blur(e.id)}}}),eV=createPluginFactory({key:"history",withOverrides:e=>(0,y.VC)(e)}),eW="inline-void",eq=createPluginFactory({key:eW,withOverrides:e=>{let{isInline:t}=e,{isVoid:n}=e,r=[],o=[];return e.plugins.forEach(e=>{e.isInline&&r.push(e.type),e.isVoid&&o.push(e.type)}),e.isInline=e=>!!r.includes(e.type)||t(e),e.isVoid=e=>!!o.includes(e.type)||n(e),e}}),getInjectedPlugins=(e,t)=>{let n=[];return[...e.plugins].reverse().forEach(e=>{var r;let o=null===(r=e.inject.pluginsByKey)||void 0===r?void 0:r[t.key];o&&n.push(o)}),[t,...n]},pipeInsertDataQuery=(e,{data:t,dataTransfer:n})=>e.every(e=>{var r,o;let i=null===(r=e.editor)||void 0===r?void 0:null===(o=r.insertData)||void 0===o?void 0:o.query;return!i||i({data:t,dataTransfer:n})}),withoutNormalizing=(e,t)=>{let n=!1;return v.ML.withoutNormalizing(e,()=>{n=!!t()}),n},pipeInsertFragment=(e,t,{fragment:n,...r})=>{withoutNormalizing(e,()=>{t.some(e=>{var t,o,i;return(null===(t=e.editor)||void 0===t?void 0:null===(o=t.insertData)||void 0===o?void 0:null===(i=o.preInsert)||void 0===i?void 0:i.call(o,n,r))===!0}),e.insertFragment(n)})},pipeTransformData=(e,{data:t,dataTransfer:n})=>(e.forEach(e=>{var r,o;let i=null===(r=e.editor)||void 0===r?void 0:null===(o=r.insertData)||void 0===o?void 0:o.transformData;i&&(t=i(t,{dataTransfer:n}))}),t),pipeTransformFragment=(e,{fragment:t,...n})=>(e.forEach(e=>{var r,o;let i=null===(r=e.editor)||void 0===r?void 0:null===(o=r.insertData)||void 0===o?void 0:o.transformFragment;i&&(t=i(t,n))}),t),eG="insertData",eY=createPluginFactory({key:eG,withOverrides:e=>{let{insertData:t}=e;return e.insertData=n=>{let r=[...e.plugins].reverse().some(t=>{var r;let o=t.editor.insertData;if(!o)return!1;let i=getInjectedPlugins(e,t),{format:a,getFragment:l}=o;if(!a)return!1;let s=n.getData(a);if(!s)return;if(!pipeInsertDataQuery(i,{data:s,dataTransfer:n}))return!1;s=pipeTransformData(i,{data:s,dataTransfer:n});let u=null==l?void 0:l({data:s,dataTransfer:n});return null!==(r=u)&&void 0!==r&&!!r.length&&!!(u=pipeTransformFragment(i,{fragment:u,data:s,dataTransfer:n})).length&&(pipeInsertFragment(e,i,{fragment:u,data:s,dataTransfer:n}),!0)});r||t(n)},e}}),withTReact=e=>(0,m.BU)(e),eQ=createPluginFactory({key:"react",withOverrides:withTReact}),isElement=e=>v.W_.isElement(e),isText=e=>v.xv.isText(e),eZ="p",createTEditor=()=>(0,v.Jh)(),createPlateStore=(e={})=>(0,h.MT)(`plate-${e.id}`)({id:"main",value:[{type:eZ,children:[{text:""}]}],editor:null,isRendered:!1,keyEditor:1,keyPlugins:1,keySelection:1,keyDecorate:1,decorate:null,enabled:!0,editableProps:null,onChange:null,plugins:[],renderElement:null,renderLeaf:null,...e}).extendActions((t,n)=>({resetEditor:()=>{var r;t.editor(withPlate(createTEditor(),{id:e.id,plugins:null===(r=n.editor())||void 0===r?void 0:r.plugins}))},incrementKey:e=>{var r;let o=null!==(r=n[e]())&&void 0!==r?r:1;t[e](o+1)}})).extendActions((e,t)=>({redecorate:()=>{e.incrementKey("keyDecorate")}})),getPluginsByKey=e=>{var t;return null!==(t=null==e?void 0:e.pluginsByKey)&&void 0!==t?t:{}},getPlugin=(e,t)=>{var n;return null!==(n=getPluginsByKey(e)[t])&&void 0!==n?n:{key:t}},getPluginType=(e,t)=>{var n,r;return null!==(n=null!==(r=getPlugin(e,t).type)&&void 0!==r?r:t)&&void 0!==n?n:""},isInlineNode=e=>t=>isText(t)||isElement(t)&&e.isInline(t),makeBlockLazy=e=>()=>({type:e,children:[]}),hasDifferentChildNodes=(e,t)=>e.some((e,n,r)=>{let o=r[n-1];return 0!==n&&t(e)!==t(o)}),normalizeDifferentNodeTypes=(e,t,n)=>{let r=hasDifferentChildNodes(e,t),{fragment:o}=e.reduce((e,o)=>{if(r&&t(o)){let t=e.precedingBlock;t||(t=n(),e.precedingBlock=t,e.fragment.push(t)),t.children.push(o)}else e.fragment.push(o),e.precedingBlock=null;return e},{fragment:[],precedingBlock:null});return o},normalizeEmptyChildren=e=>e.length?e:[{text:""}],normalize=(e,t,n)=>e=(e=normalizeDifferentNodeTypes(e=normalizeEmptyChildren(e),t,n)).map(e=>isElement(e)?{...e,children:normalize(e.children,t,n)}:e),normalizeDescendantsToDocumentFragment=(e,{descendants:t})=>{let n=isInlineNode(e),r=getPluginType(e,eZ),o=makeBlockLazy(r);return normalize(t,n,o)},htmlStringToDOMNode=(e,t=!0)=>{let n=document.createElement("body");return n.innerHTML=e,t&&(n.innerHTML=n.innerHTML.replace(/(\r\n|\n|\r|\t)/gm,"")),n};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eX=new WeakMap,eJ=new WeakMap;let Token=class Token{};let AnchorToken=class AnchorToken extends Token{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:n}=e;this.offset=t,this.path=n}};let FocusToken=class FocusToken extends Token{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:n}=e;this.offset=t,this.path=n}};var addAnchorToken=(e,t)=>{var n=e.text.length;eX.set(e,[n,t])},getAnchorOffset=e=>eX.get(e),addFocusToken=(e,t)=>{var n=e.text.length;eJ.set(e,[n,t])},getFocusOffset=e=>eJ.get(e);function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e0=new WeakSet,resolveDescendants=e=>{var t=[],addChild=e=>{if(null!=e){var n=t[t.length-1];if("string"==typeof e){var r={text:e};e0.add(r),e=r}if(v.xv.isText(e)){var o=e;v.xv.isText(n)&&e0.has(n)&&e0.has(o)&&v.xv.equals(n,o,{loose:!0})?n.text+=o.text:t.push(o)}else if(v.W_.isElement(e))t.push(e);else if(e instanceof Token){var i=t[t.length-1];v.xv.isText(i)||(addChild(""),i=t[t.length-1]),e instanceof AnchorToken?addAnchorToken(i,e):e instanceof FocusToken&&addFocusToken(i,e)}else throw Error("Unexpected hyperscript child object: ".concat(e))}};for(var n of e.flat(1/0))addChild(n);return t};function createElement(e,t,n){return _objectSpread$1(_objectSpread$1({},t),{},{children:resolveDescendants(n)})}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e1={anchor:function(e,t,n){return new AnchorToken(t)},cursor:function(e,t,n){return[new AnchorToken(t),new FocusToken(t)]},editor:(a=v.Jh,(e,t,n)=>{var r,o=[];for(var i of n)v.e6.isRange(i)?r=i:o.push(i);var l=resolveDescendants(o),s={},u=a();for(var[c,d]of(Object.assign(u,t),u.children=l,v.NB.texts(u))){var f=getAnchorOffset(c),p=getFocusOffset(c);if(null!=f){var[g]=f;s.anchor={path:d,offset:g}}if(null!=p){var[m]=p;s.focus={path:d,offset:m}}}if(s.anchor&&!s.focus)throw Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!s.anchor&&s.focus)throw Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return null!=r?u.selection=r:v.e6.isRange(s)&&(u.selection=s),u}),element:createElement,focus:function(e,t,n){return new FocusToken(t)},fragment:function(e,t,n){return resolveDescendants(n)},selection:function(e,t,n){var r=n.find(e=>e instanceof AnchorToken),o=n.find(e=>e instanceof FocusToken);if(!r||null==r.offset||null==r.path)throw Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!o||null==o.offset||null==o.path)throw Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return _objectSpread$1({anchor:{offset:r.offset,path:r.path},focus:{offset:o.offset,path:o.path}},t)},text:function(e,t,n){var r=resolveDescendants(n);if(r.length>1)throw Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[o]=r;if(null==o&&(o={text:""}),!v.xv.isText(o))throw Error("\n    The <text> hyperscript tag can only contain text content as children.");return e0.delete(o),Object.assign(o,t),o}},createFactory=e=>function(t,n){for(var r,o,i,a=arguments.length,l=Array(a>2?a-2:0),s=2;s<a;s++)l[s-2]=arguments[s];var u=e[t];if(!u)throw Error("No hyperscript creator found for tag: <".concat(t,">"));return null==n&&(n={}),!1!==isObject(r=n)&&(void 0===(o=r.constructor)||!1!==isObject(i=o.prototype)&&!1!==i.hasOwnProperty("isPrototypeOf"))||(l=[n].concat(l),n={}),u(t,n,l=l.filter(e=>!!e).flat())},normalizeElements=e=>{var t={};for(var n in e)!function(n){var r=e[n];if("object"!=typeof r)throw Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(n,">  tag you passed: ").concat(r));t[n]=(e,t,n)=>createElement("element",_objectSpread(_objectSpread({},r),t),n)}(n);return t},e2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{elements:t={}}=e,n=normalizeElements(t);return createFactory(_objectSpread(_objectSpread(_objectSpread({},e1),n),e.creators))}();let deserializeHtmlNodeChildren=(e,t)=>Array.from(t.childNodes).map(deserializeHtmlNode(e)).flat(),htmlBodyToFragment=(e,t)=>{if("BODY"===t.nodeName)return e2("fragment",{},deserializeHtmlNodeChildren(e,t))},htmlBrToNewLine=e=>{if("BR"===e.nodeName)return"\n"};var castArray_1=function(){if(!arguments.length)return[];var e=arguments[0];return eE(e)?e:[e]};let pluginDeserializeHtml=(e,t,{element:n,deserializeLeaf:r})=>{var o;let{deserializeHtml:i,isElement:a,isLeaf:l,type:s}=t;if(!i)return;let{attributeNames:u,query:c,isLeaf:d,isElement:f,rules:p}=i,{getNode:g}=i,m=f||a,h=d||l;if(!r&&!m||r&&!h)return;if(p){let e=p.some(({validNodeName:e="*",validStyle:r,validClassName:o,validAttribute:i})=>{if(e){let t=castArray_1(e);if(t.length&&!t.includes(n.nodeName)&&"*"!==e)return!1}if(o&&!n.classList.contains(o))return!1;if(r)for(let[e,o]of Object.entries(r)){var a;let r=castArray_1(o);if(!r.includes(n.style[e])&&"*"!==o||"*"===o&&!n.style[e])return;let i=null===(a=t.inject.props)||void 0===a?void 0:a.defaultNodeValue;if(i&&i===n.style[e])return!1}if(i){if("string"==typeof i){if(!n.getAttributeNames().includes(i))return!1}else for(let[e,t]of Object.entries(i)){let r=castArray_1(t),o=n.getAttribute(e);if(!o||!r.includes(o))return!1}}return!0});if(!e)return}if(c&&!c(n))return;if(!g){if(m)g=()=>({type:s});else{if(!h)return;g=()=>({[s]:!0})}}let y=null!==(o=g(n,{}))&&void 0!==o?o:{};if(!Object.keys(y).length)return;let v=getInjectedPlugins(e,t);if(v.forEach(e=>{var t,r;let o=null===(t=e.deserializeHtml)||void 0===t?void 0:null===(r=t.getNode)||void 0===r?void 0:r.call(t,n,y);o&&(y={...y,...o})}),u){let e={},t=n.getAttributeNames();for(let r of t)u.includes(r)&&(e[r]=n.getAttribute(r));Object.keys(e).length&&(y.attributes=e)}return{...i,node:y}},pipeDeserializeHtmlElement=(e,t)=>{let n;return[...e.plugins].reverse().some(r=>!!(n=pluginDeserializeHtml(e,r,{element:t}))),n},htmlElementToElement=(e,t)=>{let n=pipeDeserializeHtmlElement(e,t);if(n){var r;let{node:o,withoutChildren:i}=n,a=null!==(r=o.children)&&void 0!==r?r:deserializeHtmlNodeChildren(e,t);return(!a.length||i)&&(a=[{text:""}]),e2("element",o,a)}};var e6=_createAssigner(function(e,t,n){_baseMerge(e,t,n)});let getNodeEntry=(e,t,n)=>v.ML.node(e,t,n),getPath=(e,t,n)=>v.ML.path(e,t,n),isVoid=(e,t)=>v.ML.isVoid(e,t),getNodeDescendants=(e,t)=>v.NB.descendants(e,t),isBlock=(e,t)=>v.ML.isBlock(e,t),match=(e,t,n)=>!n||("object"==typeof n?Object.entries(n).every(([t,n])=>{let r=castArray_1(n);return r.includes(e[t])}):n(e,t)),getQueryOptions=(e,t={})=>{let{match:n,block:r}=t;return{...t,match:n||r?(t,o)=>match(t,o,n)&&(!r||isBlock(e,t)):void 0}},findDescendant=(e,t)=>{try{let n,r;let{match:o,at:i=e.selection,reverse:a=!1,voids:l=!1}=t;if(!i)return;if(v.Dr.isSpan(i))[n,r]=i;else if(v.e6.isRange(i)){let t=getPath(e,i,{edge:"start"}),o=getPath(e,i,{edge:"end"});n=a?o:t,r=a?t:o}let s=[e,[]];v.y$.isPath(i)&&(s=getNodeEntry(e,i));let u=getNodeDescendants(s[0],{reverse:a,from:n,to:r,pass:([t])=>!l&&isVoid(e,t)});for(let[e,t]of u)if(match(e,t,o))return[e,i.concat(t)]}catch(e){return}},unhangRange=(e,t,n={})=>{let{voids:r,unhang:o=!0}=n;if(v.e6.isRange(t)&&o)return v.ML.unhangRange(e,t,{voids:r})},getNodeEntries=(e,t)=>(unhangRange(e,null==t?void 0:t.at,t),v.ML.nodes(e,getQueryOptions(e,t))),findNode=(e,t={})=>{try{let n=getNodeEntries(e,{at:e.selection||[],...getQueryOptions(e,t)});for(let[e,t]of n)return[e,t]}catch(e){return}},getAboveNode=(e,t)=>v.ML.above(e,getQueryOptions(e,t)),getBlockAbove=(e,t={})=>getAboveNode(e,{...t,block:!0}),isAncestor=e=>v.W_.isAncestor(e),getChildren=e=>{let[t,n]=e;if(isAncestor(t)){let{children:e}=t;return e.map((e,t)=>{let r=n.concat([t]);return[e,r]})}return[]},getEdgePoints=(e,t)=>v.ML.edges(e,t),getEdgeBlocksAbove=(e,{at:t,...n}={})=>{let r=null!=t?t:e.selection;if(!r)return null;let[o,i]=getEdgePoints(e,null!=r?r:e.selection),a=getBlockAbove(e,{at:o,...n});if(!a)return null;let l=getBlockAbove(e,{at:i,...n});return l?[a,l]:null},getLastChild$1=e=>{let[t,n]=e;if(isText(t)||!t.children.length)return null;let r=t.children;return[r[r.length-1],n.concat([r.length-1])]},getLastChildPath=e=>{let t=getLastChild$1(e);return t?t[1]:e[1].concat([-1])},isLastChild=(e,t)=>{let n=getLastChildPath(e);return v.y$.equals(n,t)},getLastNode=(e,t)=>v.ML.last(e,t),getLastChild=(e,t)=>{if(!(t+1)||!isAncestor(e))return e;let{children:n}=e,r=n[n.length-1];return getLastChild(r,t-1)},getLastNodeByLevel=(e,t)=>{let{children:n}=e,r=n[n.length-1];if(!r)return;let[,o]=getLastNode(e,[]);return[getLastChild(r,t-1),o.slice(0,t+1)]},getMarks=e=>v.ML.marks(e),getMark=(e,t)=>{if(!e)return;let n=getMarks(e);return null==n?void 0:n[t]},getNextSiblingNodes=(e,t)=>{let[n,r]=e,o=t[r.length],i=[],a=n.children;if(o+1<n.children.length)for(let e=o+1;e<n.children.length;e++)i.push(a[e]);return i};var _arrayMap=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};function SetCache(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new MapCache;++t<n;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function(e){return this.__data__.has(e)};var _arraySome=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},_equalArrays=function(e,t,n,r,o,i){var a=1&n,l=e.length,s=t.length;if(l!=s&&!(a&&s>l))return!1;var u=i.get(e),c=i.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,p=2&n?new SetCache:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var g=e[d],m=t[d];if(r)var h=a?r(m,g,d,t,e,i):r(g,m,d,e,t,i);if(void 0!==h){if(h)continue;f=!1;break}if(p){if(!_arraySome(t,function(e,t){if(!p.has(t)&&(g===e||o(g,e,n,r,i)))return p.push(t)})){f=!1;break}}else if(!(g===m||o(g,m,n,r,i))){f=!1;break}}return i.delete(e),i.delete(t),f},_mapToArray=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n},_setToArray=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},e9=K?K.prototype:void 0,e3=e9?e9.valueOf:void 0,_equalByTag=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!i(new ef(e),new ef(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return eq_1(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=_mapToArray;case"[object Set]":var s=1&r;if(l||(l=_setToArray),e.size!=t.size&&!s)break;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=_equalArrays(l(e),l(t),r,o,i,a);return a.delete(e),c;case"[object Symbol]":if(e3)return e3.call(e)==e3.call(t)}return!1},_arrayPush=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},_baseGetAllKeys=function(e,t,n){var r=t(e);return eE(e)?r:_arrayPush(r,n(e))},_arrayFilter=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i},stubArray_1=function(){return[]},e4=Object.prototype.propertyIsEnumerable,e7=Object.getOwnPropertySymbols,e5=e7?function(e){return null==e?[]:_arrayFilter(e7(e=Object(e)),function(t){return e4.call(e,t)})}:stubArray_1,e8=_overArg(Object.keys,Object),te=Object.prototype.hasOwnProperty,_baseKeys=function(e){if(!_isPrototype(e))return e8(e);var t=[];for(var n in Object(e))te.call(e,n)&&"constructor"!=n&&t.push(n);return t},keys_1=function(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)},_getAllKeys=function(e){return _baseGetAllKeys(e,keys_1,e5)},tt=Object.prototype.hasOwnProperty,_equalObjects=function(e,t,n,r,o,i){var a=1&n,l=_getAllKeys(e),s=l.length;if(s!=_getAllKeys(t).length&&!a)return!1;for(var u=s;u--;){var c=l[u];if(!(a?c in t:tt.call(t,c)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var g=a;++u<s;){var m=e[c=l[u]],h=t[c];if(r)var y=a?r(h,m,c,t,e,i):r(m,h,c,e,t,i);if(!(void 0===y?m===h||o(m,h,n,r,i):y)){p=!1;break}g||(g="constructor"==c)}if(p&&!g){var v=e.constructor,b=t.constructor;v!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(e),i.delete(t),p},tn=_getNative(F,"DataView"),tr=_getNative(F,"Promise"),to=_getNative(F,"Set"),ti=_getNative(F,"WeakMap"),ta="[object Map]",tl="[object Promise]",ts="[object Set]",tu="[object WeakMap]",tc="[object DataView]",td=_toSource(tn),tf=_toSource(el),tp=_toSource(tr),tg=_toSource(to),tm=_toSource(ti),th=_baseGetTag;(tn&&th(new tn(new ArrayBuffer(1)))!=tc||el&&th(new el)!=ta||tr&&th(tr.resolve())!=tl||to&&th(new to)!=ts||ti&&th(new ti)!=tu)&&(th=function(e){var t=_baseGetTag(e),n="[object Object]"==t?e.constructor:void 0,r=n?_toSource(n):"";if(r)switch(r){case td:return tc;case tf:return ta;case tp:return tl;case tg:return ts;case tm:return tu}return t});var ty=th,tv="[object Arguments]",tb="[object Array]",t_="[object Object]",tE=Object.prototype.hasOwnProperty,_baseIsEqualDeep=function(e,t,n,r,o,i){var a=eE(e),l=eE(t),s=a?tb:ty(e),u=l?tb:ty(t);s=s==tv?t_:s,u=u==tv?t_:u;var c=s==t_,d=u==t_,f=s==u;if(f&&eP(e)){if(!eP(t))return!1;a=!0,c=!1}if(f&&!c)return i||(i=new Stack),a||eN(e)?_equalArrays(e,t,n,r,o,i):_equalByTag(e,t,s,n,r,o,i);if(!(1&n)){var p=c&&tE.call(e,"__wrapped__"),g=d&&tE.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,h=g?t.value():t;return i||(i=new Stack),o(m,h,n,r,i)}}return!!f&&(i||(i=new Stack),_equalObjects(e,t,n,r,o,i))},_baseIsEqual=function baseIsEqual(e,t,n,r,o){return e===t||(null!=e&&null!=t&&(isObjectLike_1(e)||isObjectLike_1(t))?_baseIsEqualDeep(e,t,n,r,baseIsEqual,o):e!=e&&t!=t)},_baseIsMatch=function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var s=(l=n[o])[0],u=e[s],c=l[1];if(a&&l[2]){if(void 0===u&&!(s in e))return!1}else{var d=new Stack;if(r)var f=r(u,c,s,e,t,d);if(!(void 0===f?_baseIsEqual(c,u,3,r,d):f))return!1}}return!0},_isStrictComparable=function(e){return e==e&&!isObject_1(e)},_getMatchData=function(e){for(var t=keys_1(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,_isStrictComparable(o)]}return t},_matchesStrictComparable=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},_baseMatches=function(e){var t=_getMatchData(e);return 1==t.length&&t[0][2]?_matchesStrictComparable(t[0][0],t[0][1]):function(n){return n===e||_baseIsMatch(n,e,t)}},isSymbol_1=function(e){return"symbol"==typeof e||isObjectLike_1(e)&&"[object Symbol]"==_baseGetTag(e)},tP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tC=/^\w*$/,_isKey=function(e,t){if(eE(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||isSymbol_1(e))||tC.test(e)||!tP.test(e)||null!=t&&e in Object(t)};function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var memoized=function(){var n=arguments,r=t?t.apply(this,n):n[0],o=memoized.cache;if(o.has(r))return o.get(r);var i=e.apply(this,n);return memoized.cache=o.set(r,i)||o,i};return memoized.cache=new(memoize.Cache||MapCache),memoized}memoize.Cache=MapCache;var tk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tj=/\\(\\)?/g,tS=(s=(l=memoize(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(tk,function(e,n,r,o){t.push(r?o.replace(tj,"$1"):n||e)}),t},function(e){return 500===s.size&&s.clear(),e})).cache,l),tw=1/0,tO=K?K.prototype:void 0,tA=tO?tO.toString:void 0,_baseToString=function baseToString(e){if("string"==typeof e)return e;if(eE(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return tA?tA.call(e):"";var t=e+"";return"0"==t&&1/e==-tw?"-0":t},_castPath=function(e,t){return eE(e)?e:_isKey(e,t)?[e]:tS(null==e?"":_baseToString(e))},tN=1/0,_toKey=function(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-tN?"-0":t},_baseGet=function(e,t){t=_castPath(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[_toKey(t[n++])];return n&&n==r?e:void 0},get_1=function(e,t,n){var r=null==e?void 0:_baseGet(e,t);return void 0===r?n:r},_baseHasIn=function(e,t){return null!=e&&t in Object(e)},_hasPath=function(e,t,n){t=_castPath(t,e);for(var r=-1,o=t.length,i=!1;++r<o;){var a=_toKey(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&isLength_1(o)&&_isIndex(a,o)&&(eE(e)||e_(e))},property_1=function(e){var t;return _isKey(e)?(t=_toKey(e),function(e){return null==e?void 0:e[t]}):function(t){return _baseGet(t,e)}},_baseIteratee=function(e){if("function"==typeof e)return e;if(null==e)return identity_1;if("object"==typeof e){var t,n;return eE(e)?(t=e[0],n=e[1],_isKey(t)&&_isStrictComparable(n)?_matchesStrictComparable(_toKey(t),n):function(e){var r=get_1(e,t);return void 0===r&&r===n?null!=e&&_hasPath(e,t,_baseHasIn):_baseIsEqual(n,r,3)}):_baseMatches(e)}return property_1(e)},baseEach=function(e,t){if(null==e)return e;if(!isArrayLike_1(e))return e&&_baseFor(e,t,keys_1);for(var n=e.length,r=u?n:-1,o=Object(e);(u?r--:++r<n)&&!1!==t(o[r],r,o););return e},_baseMap=function(e,t){var n=-1,r=isArrayLike_1(e)?Array(e.length):[];return baseEach(e,function(e,o,i){r[++n]=t(e,o,i)}),r};let getEditorString=(e,t,n)=>t?v.ML.string(e,t,n):"",getPoint=(e,t,n)=>v.ML.point(e,t,n),getPointBefore=(e,t,n)=>v.ML.before(e,t,n),isRangeAcrossBlocks=(e,{at:t,...n}={})=>{if(t||(t=e.selection),!t)return!1;let[r,o]=v.e6.edges(t),i=getBlockAbove(e,{at:r,...n}),a=getBlockAbove(e,{at:o,...n});return i&&a&&!v.y$.equals(i[1],a[1])},getPointBeforeLocation=(e,t,n)=>{let r;if(!n||!n.match&&!n.matchString)return getPointBefore(e,t,n);let o=!n.unit||"offset"===n.unit,i=n.matchString?castArray_1(n.matchString):[""];return i.some(i=>{let a=t,l=getPoint(e,t,{edge:"end"}),s=i.length+1,u=Array(s),c=0;for(;;){var d,f,p;let g=getPointBefore(e,a,n);if(!g||isRangeAcrossBlocks(e,{at:{anchor:g,focus:l}}))return;let m=getEditorString(e,{anchor:g,focus:l}),h=m;if(o&&s&&(u.unshift({point:g,text:m}),u.pop(),h=(eE(p=u.slice(0,-1))?_arrayMap:_baseMap)(p,_baseIteratee("text")).join("")),i===h||null!==(d=n.match)&&void 0!==d&&d.call(n,{beforeString:h,beforePoint:g,at:t})){if(n.afterMatch){if(s&&o)return!!(r=null===(f=u[u.length-1])||void 0===f?void 0:f.point);return r=l,!0}return r=g,!0}if(l=g,a=g,c+=1,!n.skipInvalid&&(!i||c>i.length))return}}),r},getPointFromLocation=(e,{at:t=e.selection,focus:n}={})=>{let r;return v.e6.isRange(t)&&(r=n?t.focus:t.anchor),v.E9.isPoint(t)&&(r=t),v.y$.isPath(t)&&(r={path:t,offset:0}),r},getPointAfter=(e,t,n)=>v.ML.after(e,t,n),getVoidNode=(e,t)=>v.ML.void(e,t),getPreviousNode=(e,t)=>v.ML.previous(e,t),queryNode=(e,{filter:t,allow:n,exclude:r}={})=>{if(!e||t&&!t(e))return!1;if(n){let t=castArray_1(n);if(t.length&&!t.includes(e[0].type))return!1}if(r){let t=castArray_1(r);if(t.length&&t.includes(e[0].type))return!1}return!0},getPreviousPath=e=>{if(0===e.length)return;let t=e[e.length-1];if(!(t<=0))return e.slice(0,-1).concat(t-1)},getRangeBefore=(e,t,n)=>{let r=getPointBeforeLocation(e,t,n);if(!r)return;let o=getPoint(e,t,{edge:"end"});return{anchor:r,focus:o}},getStartPoint=(e,t)=>v.ML.start(e,t),getRangeFromBlockStart=(e,t={})=>{var n;let r=null===(n=getBlockAbove(e,t))||void 0===n?void 0:n[1];if(!r)return;let o=getStartPoint(e,r),i=getPointFromLocation(e,t);if(i)return{anchor:o,focus:i}},getSelectionText=e=>getEditorString(e,e.selection),hasSingleChild=e=>!!isText(e)||1===e.children.length&&hasSingleChild(e.children[0]),isInline=(e,t)=>v.ML.isInline(e,t),getNodeString=e=>v.NB.string(e),isAncestorEmpty=(e,t)=>!getNodeString(t)&&!t.children.some(t=>isInline(e,t)),isBlockAboveEmpty=e=>{var t;let n=null===(t=getBlockAbove(e))||void 0===t?void 0:t[0];return!!n&&isAncestorEmpty(e,n)},getParentNode=(e,t,n)=>{try{return v.ML.parent(e,t,n)}catch(e){}},isEndPoint=(e,t,n)=>!!t&&v.ML.isEnd(e,t,n),isBlockTextEmptyAfterSelection=e=>{if(!e.selection)return!1;let t=getBlockAbove(e);if(!t)return!1;let n=e.selection.focus,r=getParentNode(e,e.selection);if(!r)return!1;let[,o]=r;if(!isEndPoint(e,n,o))return!1;let i=getNextSiblingNodes(t,n.path);if(!i.length)return isEndPoint(e,n,t[1]);for(let e of i)if(isText(e)&&e.text)return!1;return!0},isFirstChild=e=>0===e[e.length-1],isMarkActive=(e,t)=>isDefined(getMark(e,t)),getRange=(e,t,n)=>v.ML.range(e,t,n),isSelectionAtBlockEnd=e=>{var t,n;let r=null===(t=getBlockAbove(e))||void 0===t?void 0:t[1];return!!r&&isEndPoint(e,null===(n=e.selection)||void 0===n?void 0:n.focus,r)},isStartPoint=(e,t,n)=>!!t&&v.ML.isStart(e,t,n),isSelectionAtBlockStart=(e,t)=>{var n,r;let o=null===(n=getBlockAbove(e,t))||void 0===n?void 0:n[1];return!!o&&isStartPoint(e,null===(r=e.selection)||void 0===r?void 0:r.focus,o)},isExpanded=e=>!!e&&v.e6.isExpanded(e),isSelectionExpanded=e=>isExpanded(e.selection),getNode=(e,t)=>{try{return v.NB.get(e,t)}catch(e){return null}},isType=(e,t,n)=>{let r=castArray_1(n),o=[];return r.forEach(t=>o.push(getPluginType(e,t))),o.includes(null==t?void 0:t.type)},someNode=(e,t)=>!!findNode(e,t),applyDeepToNodes=({node:e,source:t,apply:n,query:r})=>{let o=[e,[]];queryNode(o,r)&&(t instanceof Function?n(e,t()):n(e,t)),isAncestor(e)&&e.children.forEach(e=>{applyDeepToNodes({node:e,source:t,apply:n,query:r})})},mergeDeepToNodes=e=>{applyDeepToNodes({...e,apply:e6})},pipeDeserializeHtmlLeaf=(e,t)=>{let n={};return[...e.plugins].reverse().forEach(r=>{let o=pluginDeserializeHtml(e,r,{element:t,deserializeLeaf:!0});o&&(n={...n,...o.node})}),n},htmlElementToLeaf=(e,t)=>{let n=pipeDeserializeHtmlLeaf(e,t);return deserializeHtmlNodeChildren(e,t).reduce((e,t)=>{if(!t)return e;if(isElement(t))Object.keys(n).length&&mergeDeepToNodes({node:t,source:n,query:{filter:([e])=>isText(e)}}),e.push(t);else{let r={...n};isText(t)&&t.text&&Object.keys(r).forEach(e=>{r[e]&&t[e]&&(r[e]=t[e])}),e.push(e2("text",r,t))}return e},[])},isHtmlText=e=>e.nodeType===Node.TEXT_NODE,htmlTextNodeToString=e=>{if(isHtmlText(e))return"\n"===e.nodeValue?null:e.textContent},isHtmlElement=e=>e.nodeType===Node.ELEMENT_NODE,deserializeHtmlNode=e=>t=>{let n=htmlTextNodeToString(t);if(n)return n;if(!isHtmlElement(t))return null;let r=htmlBrToNewLine(t);if(r)return r;let o=htmlBodyToFragment(e,t);if(o)return o;let i=htmlElementToElement(e,t);return i||htmlElementToLeaf(e,t)},deserializeHtmlElement=(e,t)=>deserializeHtmlNode(e)(t),deserializeHtml=(e,{element:t,stripWhitespace:n=!0})=>{"string"==typeof t&&(t=htmlStringToDOMNode(t,n));let r=deserializeHtmlElement(e,t);return normalizeDescendantsToDocumentFragment(e,{descendants:r})},parseHtmlDocument=e=>new DOMParser().parseFromString(e,"text/html"),tT="deserializeHtml",tx=createPluginFactory({key:tT,then:e=>({editor:{insertData:{format:"text/html",getFragment:({data:t})=>{let n=parseHtmlDocument(t);return deserializeHtml(e,{element:n.body})}}}})}),tM=(0,p.cn)(null),usePlateId=()=>{let[e]=(0,p.KO)(tM);return e},getEventEditorId=e=>{var t;if(e)return e;let n=eK.focus();if(n)return n;let r=eK.blur();return r||(null!==(t=eK.last())&&void 0!==t?t:"main")},tL=createPlateStore({id:"loading"}),getPlateStore=e=>{e=getEventEditorId(e);let t=tB.get.get(e);return t||tL},usePlateStore=e=>{var t;let n=usePlateId();e=null!==(t=null!=e?e:n)&&void 0!==t?t:"main";let r=tB.use.get(e);return r||(console.warn("The plate hooks must be used inside the <PlateProvider id={id}> component's context."),r||tL)},setPlateState=(e,t)=>(isUndefined(t.onChange)||(e.onChange=t.onChange),isUndefined(t.plugins)||(e.plugins=t.plugins),isUndefined(t.editableProps)||(e.editableProps=t.editableProps),isUndefined(t.renderElement)||(e.renderElement=t.renderElement),isUndefined(t.renderLeaf)||(e.renderLeaf=t.renderLeaf),isUndefined(t.decorate)||(e.decorate=t.decorate),isUndefined(t.enabled)||(e.enabled=t.enabled),!isUndefined(t.editor)&&(e.editor=t.editor,t.editor&&(e.value=t.editor.children)),isUndefined(t.initialValue)||(e.value=t.initialValue),isUndefined(t.value)||(e.value=t.value),e),tB=((e={})=>(0,h.MT)("plate")(e).extendActions(e=>({set:(t,n)=>{e.state(e=>{if(!t)return;let r=e[t];r||(r=createPlateStore({id:t,...setPlateState({},null!=n?n:{})}),e[t]=r,eF.last(t))})},unset:t=>{e.state(e=>{delete e[t]})}})).extendSelectors(e=>({get:t=>e[t],has(t){let n=castArray_1(t);return n.every(t=>!!e[t])}})))({}),tD=tB.set,tH=tB.get,tR=tB.use,getPlateActions=e=>getPlateStore(e).set,usePlateSelectors=e=>usePlateStore(e).use;var _arrayAggregator=function(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r},_baseAggregator=function(e,t,n,r){return baseEach(e,function(e,o,i){t(r,e,n(e),i)}),r},tI=(c=function(e,t,n){_baseAssignValue(e,n,t)},function(e,t){var n=eE(e)?_arrayAggregator:_baseAggregator,r=d?d():{};return n(e,c,_baseIteratee(t),r)});let mergeDeepPlugins=(e,t)=>{let n={...t},{then:r}=n;if(r){delete n.then;let{plugins:t}=n,i=mergeDeepPlugins(e,eD(r(e,n),n));if(t&&i.plugins){var o;let e=e6(tI(t,"key"),tI(i.plugins,"key"));i.plugins=null==(o=e)?[]:_arrayMap(keys_1(o),function(e){return o[e]})}return i}return n},setDefaultPlugin=e=>(void 0===e.type&&(e.type=e.key),e.options||(e.options={}),e.inject||(e.inject={}),e.editor||(e.editor={}),e),flattenDeepPlugins=(e,t)=>{t&&t.forEach(t=>{let n=setDefaultPlugin(t);if(n=mergeDeepPlugins(e,n),e.pluginsByKey[n.key]){let t=e.plugins.indexOf(e.pluginsByKey[n.key]),r=eD(n,e.pluginsByKey[n.key]);t>=0&&(e.plugins[t]=r),e.pluginsByKey[n.key]=r}else e.plugins.push(n),e.pluginsByKey[n.key]=n;flattenDeepPlugins(e,n.plugins)})},setPlatePlugins=(e,{disableCorePlugins:t,plugins:n=[]})=>{let r=[];if(!0!==t){var o,i,a,l,s,u,c,d,f,p,g,m,h,y;"object"==typeof t&&t.react||r.push(null!==(o=null===(i=e.pluginsByKey)||void 0===i?void 0:i.react)&&void 0!==o?o:eQ()),"object"==typeof t&&t.history||r.push(null!==(a=null===(l=e.pluginsByKey)||void 0===l?void 0:l.history)&&void 0!==a?a:eV()),"object"==typeof t&&t.eventEditor||r.push(null!==(s=null===(u=e.pluginsByKey)||void 0===u?void 0:u[eU])&&void 0!==s?s:e$()),"object"==typeof t&&t.inlineVoid||r.push(null!==(c=null===(d=e.pluginsByKey)||void 0===d?void 0:d[eW])&&void 0!==c?c:eq()),"object"==typeof t&&t.insertData||r.push(null!==(f=null===(p=e.pluginsByKey)||void 0===p?void 0:p[eG])&&void 0!==f?f:eY()),"object"==typeof t&&t.deserializeHtml||r.push(null!==(g=null===(m=e.pluginsByKey)||void 0===m?void 0:m[tT])&&void 0!==g?g:tx()),"object"==typeof t&&t.deserializeAst||r.push(null!==(h=null===(y=e.pluginsByKey)||void 0===y?void 0:y[eH])&&void 0!==h?h:eR())}r=[...r,...n],e.plugins=[],e.pluginsByKey={},flattenDeepPlugins(e,r),e.plugins.forEach(t=>{if(t.overrideByKey){let n=e.plugins.map(e=>overridePluginsByKey(e,t.overrideByKey));e.plugins=[],e.pluginsByKey={},flattenDeepPlugins(e,n)}}),getPlateActions(e.id).incrementKey("keyPlugins")},withPlate=(e,{id:t="main",plugins:n=[],disableCorePlugins:r}={})=>{let o=e;return o.id=t,o.key||(o.key=Math.random()),setPlatePlugins(o,{plugins:n,disableCorePlugins:r}),o.plugins.forEach(e=>{e.withOverrides&&(o=e.withOverrides(o,e))}),o},normalizeEditor=(e,t)=>v.ML.normalize(e,t);var _arrayEach=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},tF=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)_arrayPush(t,e5(e)),e=em(e);return t}:stubArray_1,_getAllKeysIn=function(e){return _baseGetAllKeys(e,keysIn_1,tF)},tK=Object.prototype.hasOwnProperty,_initCloneArray=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&tK.call(e,"index")&&(n.index=e.index,n.input=e.input),n},_cloneDataView=function(e,t){var n=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},tz=/\w*$/,_cloneRegExp=function(e){var t=new e.constructor(e.source,tz.exec(e));return t.lastIndex=e.lastIndex,t},tU=K?K.prototype:void 0,t$=tU?tU.valueOf:void 0,_initCloneByTag=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return _cloneArrayBuffer(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return _cloneDataView(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return _cloneTypedArray(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return _cloneRegExp(e);case"[object Symbol]":return t$?Object(t$.call(e)):{}}},tV=eO&&eO.isMap,tW=tV?_baseUnary(tV):function(e){return isObjectLike_1(e)&&"[object Map]"==ty(e)},tq=eO&&eO.isSet,tG=tq?_baseUnary(tq):function(e){return isObjectLike_1(e)&&"[object Set]"==ty(e)},tY="[object Arguments]",tQ="[object Function]",tZ="[object Object]",tX={};tX[tY]=tX["[object Array]"]=tX["[object ArrayBuffer]"]=tX["[object DataView]"]=tX["[object Boolean]"]=tX["[object Date]"]=tX["[object Float32Array]"]=tX["[object Float64Array]"]=tX["[object Int8Array]"]=tX["[object Int16Array]"]=tX["[object Int32Array]"]=tX["[object Map]"]=tX["[object Number]"]=tX[tZ]=tX["[object RegExp]"]=tX["[object Set]"]=tX["[object String]"]=tX["[object Symbol]"]=tX["[object Uint8Array]"]=tX["[object Uint8ClampedArray]"]=tX["[object Uint16Array]"]=tX["[object Uint32Array]"]=!0,tX["[object Error]"]=tX[tQ]=tX["[object WeakMap]"]=!1;var _baseClone=function baseClone(e,t,n,r,o,i){var a,l=1&t,s=2&t,u=4&t;if(n&&(a=o?n(e,r,o,i):n(e)),void 0!==a)return a;if(!isObject_1(e))return e;var c=eE(e);if(c){if(a=_initCloneArray(e),!l)return _copyArray(e,a)}else{var d,f,p,g,m=ty(e),h=m==tQ||"[object GeneratorFunction]"==m;if(eP(e))return ed(e,l);if(m==tZ||m==tY||h&&!o){if(a=s||h?{}:_initCloneObject(e),!l)return s?(f=(d=a)&&_copyObject(e,keysIn_1(e),d),_copyObject(e,tF(e),f)):(g=(p=a)&&_copyObject(e,keys_1(e),p),_copyObject(e,e5(e),g))}else{if(!tX[m])return o?e:{};a=_initCloneByTag(e,m,l)}}i||(i=new Stack);var y=i.get(e);if(y)return y;i.set(e,a),tG(e)?e.forEach(function(r){a.add(baseClone(r,t,n,r,e,i))}):tW(e)&&e.forEach(function(r,o){a.set(o,baseClone(r,t,n,o,e,i))});var v=u?s?_getAllKeysIn:_getAllKeys:s?keysIn_1:keys_1,b=c?void 0:v(e);return _arrayEach(b||e,function(r,o){b&&(r=e[o=r]),_assignValue(a,o,baseClone(r,t,n,o,e,i))}),a},cloneDeep_1=function(e){return _baseClone(e,5)};let createPlugins=(e,{components:t,overrideByKey:n}={})=>{let r={};return(n&&(r=cloneDeep_1(n)),t&&Object.keys(t).forEach(e=>{r[e]||(r[e]={}),r[e].component=t[e]}),Object.keys(r).length)?e.map(e=>overridePluginsByKey(e,r)):e},createPlateEditor=({editor:e=createTEditor(),plugins:t=[],components:n,overrideByKey:r,normalizeInitialValue:o,...i}={})=>{t=createPlugins(t,{components:n,overrideByKey:r});let a=withPlate(e,{plugins:t,...i});return o&&normalizeEditor(a,{force:!0}),a},getKeysByTypes=(e,t)=>{let n=castArray_1(t),r=Object.values(e.pluginsByKey).filter(e=>n.includes(e.type));return r.map(e=>e.key)},getPluginInjectProps=(e,t)=>{var n,r;return null!==(n=null===(r=getPlugin(e,t).inject)||void 0===r?void 0:r.props)&&void 0!==n?n:{}},getPluginOptions=(e,t)=>{var n;return null!==(n=getPlugin(e,t).options)&&void 0!==n?n:{}},getPluginTypes=(e,t)=>t.map(t=>getPluginType(e,t)),getRenderNodeProps=({attributes:e,nodeProps:t,props:n,type:r})=>{let o={};if(n){var i;o=null!==(i="function"==typeof n?n(t):n)&&void 0!==i?i:{}}!o.nodeProps&&e&&(o.nodeProps=e),t={...t,...o};let{className:a}=t;return{...t,className:(0,b.Z)(getSlateClass(r),a)}},mapInjectPropsToPlugin=(e,t,n)=>{var r;let o=null===(r=t.inject.props)||void 0===r?void 0:r.validTypes;if(!o)return;let i=getKeysByTypes(e,o),a={};return i.forEach(e=>{a[e]=n}),{inject:{pluginsByKey:a}}},mockPlugin=e=>({key:"",type:"",editor:{},inject:{},options:{},...e}),useEventEditorId=()=>{let e=ez.focus(),t=ez.blur(),n=ez.last();return e||t||n},useEventPlateId=e=>{var t,n;let r=usePlateId(),o=useEventEditorId();return null!==(t=null!==(n=null!=e?e:r)&&void 0!==n?n:o)&&void 0!==t?t:"main"},usePlateEditorRef=e=>usePlateSelectors(e).editor(),usePlateEditorState=e=>(usePlateSelectors(e).keyEditor(),usePlateEditorRef(e)),normalizeInitialValue=(e,t)=>{let n=cloneDeep_1(t);if(e.plugins.forEach(e=>{var t;let r=null===(t=e.normalizeInitialValue)||void 0===t?void 0:t.call(e,n);r&&(n=r)}),!_baseIsEqual(t,n))return getPlateActions(e.id).value(n),n},pipeDecorate=(e,t)=>{let n=e.plugins.flatMap(t=>{var n,r;return null!==(n=null===(r=t.decorate)||void 0===r?void 0:r.call(t,e,t))&&void 0!==n?n:[]});if(t&&n.push(t),n.length)return e=>{let t=[],addRanges=e=>{null!=e&&e.length&&(t=[...t,...e])};return n.forEach(t=>{addRanges(t(e))}),t}},isEventHandled=(e,t)=>{if(!t)return!1;let n=t(e);return null!=n?n:e.isPropagationStopped()},pipeHandler=(e,{editableProps:t,handlerKey:n})=>{let r=[];r=e.plugins.flatMap(t=>{var r,o,i;return null!==(r=null===(o=t.handlers)||void 0===o?void 0:null===(i=o[n])||void 0===i?void 0:i.call(o,e,t))&&void 0!==r?r:[]});let o=null==t?void 0:t[n];if(r.length||o)return e=>{let t=r.some(t=>isEventHandled(e,t));return!!t||isEventHandled(e,o)}},pluginInjectProps=(e,{key:t,inject:{props:n}},r)=>{var o,i,a;let{element:l,text:s,className:u,style:c}=r,d=null!=l?l:s;if(!d||!n)return;let{nodeKey:f=t,styleKey:p=f,validTypes:g,classNames:m,transformClassName:h,transformNodeValue:y,transformStyle:v,validNodeValues:_,defaultNodeValue:E}=n;if(g&&isElement(d)&&d.type&&!g.includes(d.type))return;let P=d[f];if(!P||_&&!_.includes(P)||P===E)return;let C={},k={...r,nodeValue:P},j=null!==(o=null==y?void 0:y(k))&&void 0!==o?o:P;return l&&(C.className=(0,b.Z)(u,`slate-${f}-${P}`)),(null!=m&&m[P]||h)&&(C.className=null!==(i=null==h?void 0:h(k))&&void 0!==i?i:(0,b.Z)(u,null==m?void 0:m[j])),p&&(C.style=null!==(a=null==v?void 0:v(k))&&void 0!==a?a:{...c,[p]:j}),C},pipeInjectProps=(e,t)=>(e.plugins.forEach(n=>{if(n.inject.props){let r=pluginInjectProps(e,n,t);r&&(t={...t,...r})}}),{...t,editor:e}),pipeOnChange=e=>{let t=e.plugins.flatMap(t=>{var n,r,o;return null!==(n=null===(r=t.handlers)||void 0===r?void 0:null===(o=r.onChange)||void 0===o?void 0:o.call(r,e,t))&&void 0!==n?n:[]});return e=>t.some(t=>{if(!t)return!1;let n=t(e);return null!=n&&n})},pluginRenderElement=(e,{key:t,type:n,component:r,props:o})=>i=>{let{element:a,children:l}=i;if(a.type===n){let s=null!=r?r:m.Qr,u=e.plugins.flatMap(e=>{var t,n;return null!==(t=null===(n=e.inject)||void 0===n?void 0:n.aboveComponent)&&void 0!==t?t:[]}),c=e.plugins.flatMap(e=>{var t,n;return null!==(t=null===(n=e.inject)||void 0===n?void 0:n.belowComponent)&&void 0!==t?t:[]});i=getRenderNodeProps({attributes:a.attributes,nodeProps:i,props:o,type:n});let d=l;c.forEach(e=>{let n=e({...i,key:t});n&&(d=n({...i,children:d}))});let f=g.createElement(s,i,d);return u.forEach(e=>{let n=e({...i,key:t});n&&(f=n({...i,children:f}))}),g.createElement(ElementProvider,{element:a,scope:t},f)}},pipeRenderElement=(e,t)=>{let n=[];return e.plugins.forEach(t=>{t.isElement&&n.push(pluginRenderElement(e,t))}),r=>{let o;let i=pipeInjectProps(e,r);return(n.some(e=>!!(o=e(i))),o)?o:t?t(i):g.createElement(m.Qr,i)}},DefaultLeaf=({attributes:e,children:t,text:n,leaf:r,editor:o,nodeProps:i,...a})=>g.createElement("span",_extends({},e,a),t),pluginRenderLeaf=(e,{key:t,type:n=t,component:r,props:o})=>e=>{let{leaf:t,children:i}=e;if(t[n]){let a=null!=r?r:DefaultLeaf;return e=getRenderNodeProps({attributes:t.attributes,props:o,nodeProps:e,type:n}),g.createElement(a,e,i)}return i},pipeRenderLeaf=(e,t)=>{let n=[];return e.plugins.forEach(t=>{t.isLeaf&&t.key&&n.push(pluginRenderLeaf(e,t))}),r=>{let o=pipeInjectProps(e,r);return(n.forEach(e=>{let t=e(o);void 0!==t&&(o.children=t)}),t)?t(o):g.createElement(DefaultLeaf,o)}},createComponentAs=e=>(0,g.forwardRef)(({asChild:t,...n},r)=>{let o=t?_.g7:e;return o({ref:r,...n})}),isRenderProp=e=>"function"==typeof e,createElementAs=(e,t)=>{let n;let{as:r,wrapElement:o,...i}=t;if(r&&"string"!=typeof r)n=g.createElement(r,i);else if(isRenderProp(t.children)){let{children:e,...r}=i;n=t.children(r)}else n=r?g.createElement(r,i):g.createElement(e,i);return o?o(n):n},createNodeHOC=e=>(t,n)=>r=>g.createElement(e,_extends({},r,n),g.createElement(t,r)),createHOC=e=>(t,n)=>{let r={...t},o={},i=castArray_1(n);return i.forEach(({key:e,keys:t,...n})=>{let i=e?[e]:null!=t?t:Object.keys(r);i.forEach(e=>{o[e]={...o[e],...n}})}),Object.keys(o).forEach(t=>{r[t]&&(r[t]=e(r[t],o[t]))}),r},createNodesHOC=e=>createHOC(createNodeHOC(e)),createNodesWithHOC=e=>createHOC(e),getPreventDefaultHandler=(e,...t)=>n=>{n.preventDefault(),null==e||e(...t)},withHOC=(e,t,n)=>r=>g.createElement(e,n,g.createElement(t,r)),withProps=(e,t)=>n=>g.createElement(e,_extends({},n,t)),withProviders=(...e)=>t=>n=>e.reduceRight((e,t)=>{let n=t;return Array.isArray(t)?([n]=t,g.createElement(n,t[1],e)):g.createElement(n,null,e)},g.createElement(t,n)),tJ=Symbol("element"),{elementStore:t0,useElementStore:t1}=createAtomStore({element:null},{scope:tJ,name:"element"}),useElement=e=>{let t=t1().get.element(e);if(!t)throw Error("The `useElement(pluginKey)` hook must be used inside the node component's context");return t},ElementProviderChild=({element:e,scope:t,children:n})=>{let r=t1().set.element(t);return(0,g.useEffect)(()=>{r(e)},[e,r]),n},ElementProvider=({element:e,scope:t=tJ,children:n,...r})=>g.createElement(D,_extends({initialValues:[[t0.atom.element,e]],scope:t},r),g.createElement(ElementProviderChild,{element:e,scope:t},n)),t2=createComponentAs(e=>createElementAs("div",e));var last_1=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},_baseSlice=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i},_baseUnset=function(e,t){var n,r;return t=_castPath(t,e),n=e,null==(e=(r=t).length<2?n:_baseGet(n,_baseSlice(r,0,-1)))||delete e[_toKey(last_1(t))]},_customOmitClone=function(e){return isPlainObject_1(e)?void 0:e},t6=K?K.isConcatSpreadable:void 0,_isFlattenable=function(e){return eE(e)||e_(e)||!!(t6&&e&&e[t6])},_baseFlatten=function baseFlatten(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=_isFlattenable),o||(o=[]);++i<a;){var l=e[i];t>0&&n(l)?t>1?baseFlatten(l,t-1,n,r,o):_arrayPush(o,l):r||(o[o.length]=l)}return o},t9=ei(_overRest(f=function(e,t){var n={};if(null==e)return n;var r=!1;t=_arrayMap(t,function(t){return t=_castPath(t,e),r||(r=t.length>1),t}),_copyObject(e,_getAllKeysIn(e),n),r&&(n=_baseClone(n,7,_customOmitClone));for(var o=t.length;o--;)_baseUnset(n,t[o]);return n},void 0,function(e){return(null==e?0:e.length)?_baseFlatten(e,1):[]}),f+"");let useEditableProps=({id:e="main"})=>{let t=usePlateEditorRef(e),n=usePlateSelectors(e).keyPlugins(),r=usePlateSelectors(e).keyDecorate(),o=usePlateSelectors(e).editableProps(),i=usePlateSelectors(e).decorate(),a=usePlateSelectors(e).renderLeaf(),l=usePlateSelectors(e).renderElement(),s=t&&!!n,u=(0,g.useMemo)(()=>{if(s)return pipeDecorate(t,null!=i?i:null==o?void 0:o.decorate)},[null==o?void 0:o.decorate,t,s,i]),c=(0,g.useMemo)(()=>{if(r&&u)return e=>u(e)},[u,r]),d=(0,g.useMemo)(()=>{if(s)return pipeRenderElement(t,null!=l?l:null==o?void 0:o.renderElement)},[null==o?void 0:o.renderElement,t,s,l]),f=(0,g.useMemo)(()=>{if(s)return pipeRenderLeaf(t,null!=a?a:null==o?void 0:o.renderLeaf)},[null==o?void 0:o.renderLeaf,t,s,a]),p=(0,E.NY)(()=>{if(!s)return{};let e={decorate:c,renderElement:d,renderLeaf:f};return C.forEach(n=>{let r=pipeHandler(t,{editableProps:o,handlerKey:n});r&&(e[n]=r)}),e},[c,o,s,d,f]);return(0,E.NY)(()=>({...t9(o,[...C,"renderElement","renderLeaf"]),...p}),[o,p])},usePlateStoreEffects=({id:e,value:t,enabled:n=!0,onChange:r,editableProps:o,plugins:i,decorate:a,renderElement:l,renderLeaf:s})=>{let u=getPlateActions(e);(0,g.useEffect)(()=>{!isUndefined(t)&&t&&u.value(t)},[t,u]),(0,g.useEffect)(()=>{isUndefined(n)||u.enabled(n)},[n,u]),(0,g.useEffect)(()=>{isUndefined(r)||u.onChange(r)},[r,u]),(0,E.KW)(()=>{isUndefined(o)||u.editableProps(o)},[o,u]),(0,g.useEffect)(()=>{isUndefined(a)||u.decorate(a)},[a,u]),(0,g.useEffect)(()=>{isUndefined(l)||u.renderElement(l)},[l,u]),(0,g.useEffect)(()=>{isUndefined(s)||u.renderLeaf(s)},[s,u]),(0,g.useEffect)(()=>{isUndefined(i)||u.plugins(i)},[i,u])},usePlateEffects=({id:e="main",editor:t,initialValue:n,normalizeInitialValue:r,plugins:o,disableCorePlugins:i,editableProps:a,onChange:l,value:s,enabled:u})=>{let c=usePlateEditorRef(e),d=usePlateSelectors(e).enabled(),f=usePlateSelectors(e).plugins(),p=(0,g.useRef)(c),m=(0,g.useRef)(f),h=getPlateActions(e);(0,g.useEffect)(()=>{n&&h.value(n)},[h]),usePlateStoreEffects({editableProps:a,onChange:l,id:e,value:s,enabled:u,plugins:o}),(0,g.useEffect)(()=>{c&&!d&&h.editor(null)},[d,c,h]),(0,g.useEffect)(()=>{!c&&d&&h.editor(null!=t?t:withPlate(createTEditor(),{id:e,plugins:o,disableCorePlugins:i}))},[t,e,f,c,d,i,h,o]),(0,g.useEffect)(()=>{c&&p.current===c&&m.current!==f&&(setPlatePlugins(c,{plugins:f,disableCorePlugins:i}),m.current=f)},[f,c,i]),(0,g.useEffect)(()=>{c&&r&&normalizeEditor(c,{force:!0})},[c,r]),(0,g.useEffect)(()=>{p.current=c},[c])},useSlateProps=({id:e}={})=>{let t=usePlateEditorRef(e),n=usePlateSelectors(e).keyPlugins(),r=usePlateSelectors(e).value(),o=usePlateSelectors(e).onChange(),[i,a]=(0,g.useState)(!1);(0,g.useEffect)(()=>{t&&r&&!i&&(normalizeInitialValue(t,r),a(!0))},[t,e,i,r]);let l=(0,g.useCallback)(r=>{if(!t||!n)return;let i=pipeOnChange(t)(r);i||null==o||o(r),getPlateActions(e).value(r)},[o,t,e,n]);return(0,g.useMemo)(()=>t&&i?{key:t.key,editor:t,onChange:l,value:r}:{},[t,i,l,r])},usePlate=e=>{let{id:t}=e;return usePlateEffects(e),{slateProps:useSlateProps({id:t}),editableProps:useEditableProps({id:t})}},useEditorRef=()=>(0,m._7)(),EditorRefPluginEffect=({plugin:e})=>{var t;let n=useEditorRef();return null===(t=e.useHooks)||void 0===t||t.call(e,n,e),null},EditorRefEffect=({id:e})=>{let t=useEditorRef();return usePlateSelectors(e).keyPlugins(),(0,g.useEffect)(()=>{let e=getPlateActions(t.id);return e.isRendered(!0),()=>{e.isRendered(!1)}},[t.id]),g.createElement(g.Fragment,null,t.plugins.map(e=>g.createElement(EditorRefPluginEffect,{key:e.key,plugin:e})))},useEditorState=()=>(0,m.ui)(),t3=(0,g.memo)(({id:e})=>{let t=useEditorState();return(0,g.useEffect)(()=>{getPlateActions(e).incrementKey("keyEditor")}),(0,g.useEffect)(()=>{getPlateActions(e).incrementKey("keySelection")},[t.selection,e]),null}),usePlatesStoreEffect=(e,t)=>{(0,g.useEffect)(()=>{tH.has(e)||tD.set(e,t)},[e])},PlateContent=({children:e,renderEditable:t,editableRef:n,firstChildren:r,...o})=>{let{slateProps:i,editableProps:a}=usePlate(o);if(!i.editor)return null;let l=g.createElement(m.CX,_extends({ref:n},a));return g.createElement(m.mH,i,r,t?t(l):l,g.createElement(t3,{id:o.id}),g.createElement(EditorRefEffect,{id:o.id}),e)},Plate=e=>{let{id:t="main",...n}=e,r=tR.has(t);return((0,g.useEffect)(()=>()=>{tD.unset(t)},[t]),usePlatesStoreEffect(t,n),r)?g.createElement(D,{initialValues:[[tM,t]]},g.createElement(PlateContent,e)):null},PlateProvider=({id:e="main",children:t})=>{let n=tR.has(e);return(usePlatesStoreEffect(e),n)?g.createElement(D,{key:e,initialValues:[[tM,e]]},t):null},PlateEventProvider=({id:e,children:t})=>(e=useEventPlateId(e),g.createElement(PlateProvider,{id:e},t)),withPlateEventProvider=(e,t)=>withHOC(PlateEventProvider,e,t),setRef=(e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)},composeRefs=(...e)=>t=>e.forEach(e=>setRef(e,t)),useComposedRef=(...e)=>(0,g.useCallback)(composeRefs(...e),e),setNodes=(e,t,n)=>v.YR.setNodes(e,t,n),setElements=(e,t,n)=>setNodes(e,t,n),toggleNodeType=(e,t,n)=>{let{activeType:r,inactiveType:o=getPluginType(e,eZ)}=t;if(!r||!e.selection)return;let i=someNode(e,{...n,match:{type:r}});i&&r===o||setElements(e,{type:i?o:r})},onKeyDownToggleElement=(e,{type:t,options:{hotkey:n}})=>r=>{let o=getPluginType(e,eZ);if(!n)return;let i=castArray_1(n);for(let n of i)if(w(n,r)){r.preventDefault(),toggleNodeType(e,{activeType:t,inactiveType:o});return}},unsetNodes=(e,t,n)=>v.YR.unsetNodes(e,t,n),removeMark=(e,{key:t,at:n,shouldChange:r=!0,...o})=>{let i=null!=n?n:e.selection;if(t=castArray_1(t),i){if(v.e6.isRange(i)&&v.e6.isExpanded(i))unsetNodes(e,t,{at:i,match:isText,split:!0,...o});else if(e.selection){let n={...getMarks(e)||{}};t.forEach(e=>{delete n[e]}),e.marks=n,r&&e.onChange()}}},toggleMark=(e,{key:t,clear:n})=>{e.selection&&withoutNormalizing(e,()=>{let r=isMarkActive(e,t);if(r){removeMark(e,{key:t});return}if(n){let t=castArray_1(n);removeMark(e,{key:t})}e.addMark(t,!0)})},onKeyDownToggleMark=(e,{type:t,options:{hotkey:n,clear:r}})=>o=>{n&&w(n,o)&&(o.preventDefault(),toggleMark(e,{key:t,clear:r}))},t4="\r",t7="\n",t5="\xa0",t8=" ",ne="	",traverseHtmlNode=(e,t)=>{let n=t(e);if(!n)return;let r=e.firstChild;for(;r;){let n=r,o=r.previousSibling;r=r.nextSibling,traverseHtmlNode(n,t),n.previousSibling||n.nextSibling||n.parentNode||!r||o===r.previousSibling||!r.parentNode?n.previousSibling||n.nextSibling||n.parentNode||!r||r.previousSibling||r.nextSibling||r.parentNode||(o?r=o.nextSibling?o.nextSibling.nextSibling:null:e.firstChild&&(r=e.firstChild.nextSibling)):r=o?o.nextSibling:e.firstChild}},traverseHtmlElements=(e,t)=>{traverseHtmlNode(e,e=>!isHtmlElement(e)||t(e))},cleanHtmlBrElements=e=>{traverseHtmlElements(e,e=>{if("BR"!==e.tagName)return!0;let t=document.createTextNode(t7);return e.parentElement&&e.parentElement.replaceChild(t,e),!1})},nt=["BR","IMG"],isEmpty=e=>!nt.includes(e.nodeName)&&!e.innerHTML.trim(),removeIfEmpty=e=>{if(isEmpty(e)){let{parentElement:t}=e;e.remove(),t&&removeIfEmpty(t)}},cleanHtmlEmptyElements=e=>{traverseHtmlElements(e,e=>(removeIfEmpty(e),!0))},replaceTagName=(e,t)=>{let n=document.createElement(t);for(let{name:t}of(n.innerHTML=e.innerHTML,e.attributes)){let r=e.getAttribute(t);r&&n.setAttribute(t,r)}return e.parentNode&&e.parentNode.replaceChild(n,e),n},cleanHtmlFontElements=e=>{traverseHtmlElements(e,e=>("FONT"===e.tagName&&(e.textContent?replaceTagName(e,"span"):e.remove()),!0))},isHtmlFragmentHref=e=>e.startsWith("#"),unwrapHtmlElement=e=>{e.outerHTML=e.innerHTML},cleanHtmlLinkElements=e=>{traverseHtmlElements(e,e=>{if("A"!==e.tagName)return!0;let t=e.getAttribute("href");if((!t||isHtmlFragmentHref(t))&&unwrapHtmlElement(e),t&&e.querySelector("img"))for(let t of e.querySelectorAll("span"))t.innerText||unwrapHtmlElement(t);return!0})},traverseHtmlTexts=(e,t)=>{traverseHtmlNode(e,e=>!isHtmlText(e)||t(e))},cleanHtmlTextNodes=e=>{traverseHtmlTexts(e,e=>{if(/^\n\s*$/.test(e.data)&&(e.previousElementSibling||e.nextElementSibling))return e.remove(),!0;if(e.data=e.data.replace(/\n\s*/g,"\n"),e.data.includes(t4)||e.data.includes(t7)||e.data.includes(t5)){let t=e.data.includes(t8),n=/\S/.test(e.data),r=e.data.includes(t7);if(!(t||n)&&!r)return e.data===t5?e.data=t8:e.remove(),!0;if(e.previousSibling&&"BR"===e.previousSibling.nodeName&&e.parentElement){e.parentElement.removeChild(e.previousSibling);let t=e.data.match(/^[\r\n]+/),n=t?t[0].length:0;e.data=e.data.substring(n).replace(RegExp(t7,"g"),t8).replace(RegExp(t4,"g"),t8),e.data=`
${e.data}`}else e.data=e.data.replace(RegExp(t7,"g"),t8).replace(RegExp(t4,"g"),t8)}return!0})},isHtmlBlockElement=e=>/^(address|blockquote|body|center|dir|div|dl|fieldset|form|h[1-6]|hr|isindex|menu|noframes|noscript|ol|p|pre|table|ul|dd|dt|frameset|li|tbody|td|tfoot|th|thead|tr|html)$/i.test(e.nodeName),copyBlockMarksToSpanChild=e=>{traverseHtmlElements(e,e=>{let t=e.getAttribute("style");if(!t)return!0;if(isHtmlBlockElement(e)){let{style:{backgroundColor:t,color:n,fontFamily:r,fontSize:o,fontStyle:i,fontWeight:a,textDecoration:l}}=e;if(t||n||r||o||i||a||l){let t=document.createElement("span");["initial","inherit"].includes(n)||(t.style.color=n),t.style.fontFamily=r,t.style.fontSize=o,["normal","initial","inherit"].includes(n)||(t.style.fontStyle=i),["normal",400].includes(a)||(t.style.fontWeight=a),t.style.textDecoration=l,t.innerHTML=e.innerHTML,e.innerHTML=t.outerHTML}}return!0})},findHtmlElement=(e,t)=>{let n=null;return traverseHtmlElements(e,e=>!t(e)||(n=e,!1)),n},someHtmlElement=(e,t)=>!!findHtmlElement(e,t),acceptNode=()=>NodeFilter.FILTER_ACCEPT,getHtmlComments=e=>{let t=[],n=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode}),r=n.nextNode();for(;r;)r.nodeValue&&t.push(r.nodeValue),r=n.nextNode();return t},isHtmlComment=e=>e.nodeType===Node.COMMENT_NODE,postCleanHtml=e=>{let t=e.trim().replace(RegExp("​","g"),"");return`<body>${t}</body>`},removeBeforeHtml=e=>{let t=e.indexOf("<html");return -1===t?e:e.substring(t)},removeAfterHtml=e=>{let t=e.lastIndexOf("</html>");return -1===t?e:e.substring(0,t+7)},nn=[e=>removeBeforeHtml(removeAfterHtml(e)),e=>e.replace(/(\r\n|\r)/gm,"\n")],preCleanHtml=e=>nn.reduce((e,t)=>t(e),e),traverseHtmlComments=(e,t)=>{traverseHtmlNode(e,e=>!isHtmlComment(e)||t(e))},removeHtmlNodesBetweenComments=(e,t,n)=>{let isClosingComment=e=>isHtmlComment(e)&&e.data===n;traverseHtmlComments(e,e=>{if(e.data===t){let t=e.nextSibling;for(e.remove();t&&!isClosingComment(t);){let{nextSibling:e}=t;t.remove(),t=e}t&&isClosingComment(t)&&t.remove()}return!0})},createElementWithSlate=e=>{let{editor:t=withTReact(createTEditor()),value:n=[],onChange:r=()=>{},children:o,...i}=e||{};return g.createElement(m.mH,{editor:t,value:n,onChange:r,...i},o)},stripClassNames=(e,{preserveClassNames:t=["slate-"]})=>{let n=e.split(/(class="[^"]*")/g),r="";return n.forEach((e,n)=>{if(n%2==0)return r+=e;let o=RegExp(t.map(e=>`${e}[^"\\s]*`).join("|"),"g"),i=e.match(o);i&&(r+=`class="${i.join(" ")}"`)}),r},elementToHtml=(e,{props:t,slateProps:n,preserveClassNames:r})=>{let o=`<div>${t.children}</div>`;return t.element.type&&(t=pipeInjectProps(e,t),e.plugins.some(i=>{var a,l;return!!i.isElement&&null!==i.serializeHtml&&t.element.type===i.type&&(o=stripClassNames(o=(0,P.uS)(createElementWithSlate({...n,children:null!==(a=null===(l=i.serializeHtml)||void 0===l?void 0:l.call(i,t))&&void 0!==a?a:pluginRenderElement(e,i)(t)})),{preserveClassNames:r}),!0)})),o},leafToHtml=(e,{props:t,slateProps:n,preserveClassNames:r})=>{let{children:o}=t;return e.plugins.reduce((i,a)=>{var l,s;if(!a.isLeaf)return i;t={...pipeInjectProps(e,t),children:encodeURIComponent(i)};let u=null!==(l=null===(s=a.serializeHtml)||void 0===s?void 0:s.call(a,t))&&void 0!==l?l:pluginRenderLeaf(e,a)(t);return u===o?i:stripClassNames(decodeURIComponent((0,P.uS)(createElementWithSlate({...n,children:u}))),{preserveClassNames:r})},o)},isEncoded=(e="")=>{try{return e!==decodeURIComponent(e)}catch(e){return!1}},stripSlateDataAttributes=e=>e.replace(/( data-slate)(-node|-type|-leaf)="[^"]+"/gm,"").replace(/( data-testid)="[^"]+"/gm,""),trimWhitespace=e=>e.replace(/(\r\n|\n|\r|\t)/gm,""),serializeHtml=(e,{nodes:t,slateProps:n,stripDataAttributes:r=!0,preserveClassNames:o,stripWhitespace:i=!0})=>{let a=t.map(t=>isText(t)?leafToHtml(e,{props:{leaf:t,text:t,children:isEncoded(t.text)?t.text:encodeURIComponent(t.text),attributes:{"data-slate-leaf":!0},editor:e},slateProps:n,preserveClassNames:o}):elementToHtml(e,{props:{element:t,children:encodeURIComponent(serializeHtml(e,{nodes:t.children,preserveClassNames:o,stripWhitespace:i})),attributes:{"data-slate-node":"element",ref:null},editor:e},slateProps:n,preserveClassNames:o})).map(e=>isEncoded(e)?decodeURIComponent(e):e).join("");return i&&(a=trimWhitespace(a)),r&&(a=stripSlateDataAttributes(a)),a},createPathRef=(e,t,n)=>v.ML.pathRef(e,t,n),createPointRef=(e,t,n)=>v.ML.pointRef(e,t,n),isElementEmpty=(e,t)=>v.ML.isEmpty(e,t),deleteText=(e,t)=>{v.YR.delete(e,t)},moveNodes=(e,t)=>v.YR.moveNodes(e,t),removeNodes=(e,t)=>v.YR.removeNodes(e,t),select=(e,t)=>{v.YR.select(e,t)},mergeNodes=(e,t={})=>{withoutNormalizing(e,()=>{let n,r,{match:o,at:i=e.selection}=t,{mergeNode:a,removeEmptyAncestor:l,hanging:s=!1,voids:u=!1,mode:c="lowest"}=t;if(!i)return;if(null==o){if(v.y$.isPath(i)){let[t]=getParentNode(e,i);o=e=>t.children.includes(e)}else o=t=>isBlock(e,t)}if(!s&&v.e6.isRange(i)&&(i=v.ML.unhangRange(e,i)),v.e6.isRange(i)){if(v.e6.isCollapsed(i))i=i.anchor;else{let[,n]=v.e6.edges(i),r=createPointRef(e,n);deleteText(e,{at:i}),i=r.unref(),null==t.at&&select(e,i)}}let d=getNodeEntries(e,{at:i,match:o,voids:u,mode:c}),[f]=Array.from(d),p=getPreviousNode(e,{at:i,match:o,voids:u,mode:c});if(!f||!p)return;let[g,m]=f,[h,y]=p;if(0===m.length||0===y.length)return;let b=v.y$.next(y),_=v.y$.common(m,y),E=v.y$.isSibling(m,y),P=v.ML.levels(e,{at:m}),C=Array.from(P,([e])=>e).slice(_.length).slice(0,-1),k=getAboveNode(e,{at:m,mode:"highest",match:e=>C.includes(e)&&isElement(e)&&hasSingleChild(e)}),j=k&&createPathRef(e,k[1]);if(isText(g)&&isText(h)){let{text:e,...t}=g;r=h.text.length,n=t}else if(isElement(g)&&isElement(h)){let{children:e,...t}=g;r=h.children.length,n=t}else throw Error(`Cannot merge the node at path [${m}] with the previous sibling because it is not the same kind: ${JSON.stringify(g)} ${JSON.stringify(h)}`);if(E||a||moveNodes(e,{at:m,to:b,voids:u}),j){if(l){let t=j.current;t&&l(e,{at:t})}else removeNodes(e,{at:j.current,voids:u})}a?a(e,{at:m,to:b}):isElement(h)&&isElementEmpty(e,h)||isText(h)&&""===h.text?removeNodes(e,{at:y,voids:u}):e.apply({type:"merge_node",path:b,position:r,properties:n}),j&&j.unref()})},getEndPoint=(e,t)=>v.ML.end(e,t),getLeafNode=(e,t,n)=>v.ML.leaf(e,t,n),deleteMerge=(e,t={})=>{withoutNormalizing(e,()=>{let n;let{reverse:r=!1,unit:o="character",distance:i=1,voids:a=!1}=t,{at:l=e.selection,hanging:s=!1}=t;if(!l)return;if(v.e6.isRange(l)&&v.e6.isCollapsed(l)&&(l=l.anchor),v.E9.isPoint(l)){let t=getVoidNode(e,{at:l,mode:"highest"});if(!a&&t){let[,e]=t;l=e}else{let t={unit:o,distance:i},n=r?getPointBefore(e,l,t)||getStartPoint(e,[]):getPointAfter(e,l,t)||getEndPoint(e,[]);l={anchor:l,focus:n},s=!0}}if(v.y$.isPath(l)){removeNodes(e,{at:l,voids:a});return}if(v.e6.isCollapsed(l))return;s||(l=v.ML.unhangRange(e,l,{voids:a}));let[u,c]=v.e6.edges(l),d=getAboveNode(e,{match:t=>isBlock(e,t),at:u,voids:a}),f=getAboveNode(e,{match:t=>isBlock(e,t),at:c,voids:a}),p=d&&f&&!v.y$.equals(d[1],f[1]),g=v.y$.equals(u.path,c.path),m=a?null:getVoidNode(e,{at:u,mode:"highest"}),h=a?null:getVoidNode(e,{at:c,mode:"highest"});if(m){let t=getPointBefore(e,u);t&&d&&v.y$.isAncestor(d[1],t.path)&&(u=t)}if(h){let t=getPointAfter(e,c);t&&f&&v.y$.isAncestor(f[1],t.path)&&(c=t)}let y=[],b=getNodeEntries(e,{at:l,voids:a});for(let t of b){let[r,o]=t;(!n||0!==v.y$.compare(o,n))&&(!a&&isVoid(e,r)||!v.y$.isCommon(o,u.path)&&!v.y$.isCommon(o,c.path))&&(y.push(t),n=o)}let _=Array.from(y,([,t])=>createPathRef(e,t)),E=createPointRef(e,u),P=createPointRef(e,c);if(!g&&!m){let t=E.current,[n]=getLeafNode(e,t),{path:r}=t,{offset:o}=u,i=n.text.slice(o);e.apply({type:"remove_text",path:r,offset:o,text:i})}for(let t of _){let n=t.unref();removeNodes(e,{at:n,voids:a})}if(!h){let t=P.current,[n]=getLeafNode(e,t),{path:r}=t,o=g?u.offset:0,i=n.text.slice(o,c.offset);e.apply({type:"remove_text",path:r,offset:o,text:i})}!g&&p&&P.current&&E.current&&mergeNodes(e,{at:P.current,hanging:!0,voids:a});let C=P.unref()||E.unref();null==t.at&&C&&select(e,C)})},getCommonNode=(e,t,n)=>v.NB.common(e,t,n),getNodeChildren=(e,t,n)=>v.NB.children(e,t,n),getNodeTexts=(e,t)=>v.NB.texts(e,t),getNodes=(e,t)=>v.NB.nodes(e,t),hasNode=(e,t)=>v.NB.has(e,t),isCollapsed=e=>!!e&&v.e6.isCollapsed(e),findNodePath=(e,t)=>{try{return m.F3.findPath(e,t)}catch(e){}},collapseSelection=(e,t)=>{v.YR.collapse(e,t)},deselect=e=>{v.YR.deselect(e)},insertFragment=(e,t,n)=>{v.YR.insertFragment(e,t,n)},insertNodes=(e,t,n)=>v.YR.insertNodes(e,t,n),insertText=(e,t,n)=>{v.YR.insertText(e,t,n)},moveSelection=(e,t)=>{v.YR.move(e,t)},setSelection=(e,t)=>{v.YR.setSelection(e,t)},splitNodes=(e,t)=>v.YR.splitNodes(e,t),unwrapNodes=(e,t)=>{v.YR.unwrapNodes(e,getQueryOptions(e,t))},wrapNodes=(e,t,n)=>{unhangRange(e,null==n?void 0:n.at,n),v.YR.wrapNodes(e,t,n)},focusEditor=(e,t)=>{t&&withoutNormalizing(e,()=>{deselect(e),select(e,t)}),m.F3.focus(e)};var nr=Object.prototype,no=nr.hasOwnProperty,ni=_baseRest(function(e,t){e=Object(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&_isIterateeCall(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=keysIn_1(i),l=-1,s=a.length;++l<s;){var u=a[l],c=e[u];(void 0===c||eq_1(c,nr[u])&&!no.call(e,u))&&(e[u]=i[u])}return e});let defaultsDeepToNodes=e=>{applyDeepToNodes({...e,apply:ni})},insertElements=(e,t,n)=>insertNodes(e,t,n),insertEmptyElement=(e,t,n)=>{insertElements(e,{type:t,children:[{text:""}]},getQueryOptions(e,n))},moveChildren=(e,{at:t,to:n,match:r,fromStartIndex:o=0})=>{let i=0,a=v.y$.isPath(t)?t:t[1],l=v.y$.isPath(t)?getNode(e,a):t[0];if(!isBlock(e,l))return i;for(let t=l.children.length-1;t>=o;t--){let o=[...a,t],l=getNode(e,o);(!r||l&&r([l,o]))&&(moveNodes(e,{at:o,to:n}),i++)}return i},setMarks=(e,t,n=[])=>{e.selection&&withoutNormalizing(e,()=>{let r=castArray_1(n);removeMark(e,{key:r}),removeMark(e,{key:Object.keys(t)}),Object.keys(t).forEach(n=>{e.addMark(n,t[n])})})}}}]);